(function(){var a=Math,b=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",c="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,d="ontouchstart"in window,e=b+"Transform"in document.documentElement.style,f=/iphone|ipad/gi.test(navigator.appVersion),g=/playbook/gi.test(navigator.appVersion),h=f||g,i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,17)}}(),j=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),k="onorientationchange"in window?"orientationchange":"resize",l=d?"touchstart":"mousedown",m=d?"touchmove":"mousemove",n=d?"touchend":"mouseup",o=d?"touchcancel":"mouseup",p="translate"+(c?"3d(":"("),q=c?",0)":")",r=function(a,c){var f=this,g=document,i;f.wrapper=typeof a=="object"?a:g.getElementById(a),f.wrapper.style.overflow="hidden",f.scroller=f.wrapper.children[0],f.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in c)f.options[i]=c[i];f.x=f.options.x,f.y=f.options.y,f.options.useTransform=e?f.options.useTransform:!1,f.options.hScrollbar=f.options.hScroll&&f.options.hScrollbar,f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar,f.options.useTransition=h&&f.options.useTransition,f.scroller.style[b+"TransitionProperty"]=f.options.useTransform?"-"+b.toLowerCase()+"-transform":"top left",f.scroller.style[b+"TransitionDuration"]="0",f.scroller.style[b+"TransformOrigin"]="0 0",f.options.useTransition&&(f.scroller.style[b+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),f.options.useTransform?f.scroller.style[b+"Transform"]=p+f.x+"px,"+f.y+"px"+q:f.scroller.style.cssText+=";position:absolute;top:"+f.y+"px;left:"+f.x+"px",f.refresh(),f._bind(k,window),f._bind(l),d||f._bind("mouseout",f.wrapper)};r.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,handleEvent:function(a){var b=this;switch(a.type){case l:if(!d&&a.button!==0)return;b._start(a);break;case m:b._move(a);break;case n:case o:b._end(a);break;case k:b._resize();break;case"mouseout":b._mouseout(a);break;case"webkitTransitionEnd":b._transitionEnd(a)}},_resize:function(){this.refresh()},_pos:function(c,d){c=this.hScroll?c:0,d=this.vScroll?d:0,this.options.useTransform?this.scroller.style[b+"Transform"]=p+c+"px,"+d+"px"+q+" scale("+this.scale+")":(c=a.round(c),d=a.round(d),this.scroller.style.left=c+"px",this.scroller.style.top=d+"px"),this.x=c,this.y=d},_start:function(a){var c=this,e=d?a.touches[0]:a,f,g,h;if(!c.enabled)return;c.options.onBeforeScrollStart&&c.options.onBeforeScrollStart.call(c,a),c.options.useTransition&&c._transitionTime(0),c.moved=!1,c.animating=!1,c.zoomed=!1,c.distX=0,c.distY=0,c.absDistX=0,c.absDistY=0,c.dirX=0,c.dirY=0;if(c.options.momentum){c.options.useTransform?(f=getComputedStyle(c.scroller,null)[b+"Transform"].replace(/[^0-9-.,]/g,"").split(","),g=f[4]*1,h=f[5]*1):(g=getComputedStyle(c.scroller,null).left.replace(/[^0-9-]/g,"")*1,h=getComputedStyle(c.scroller,null).top.replace(/[^0-9-]/g,"")*1);if(g!=c.x||h!=c.y)c.options.useTransition?c._unbind("webkitTransitionEnd"):j(c.aniTime),c.steps=[],c._pos(g,h)}c.absStartX=c.x,c.absStartY=c.y,c.startX=c.x,c.startY=c.y,c.pointX=e.pageX,c.pointY=e.pageY,c.startTime=a.timeStamp||Date.now(),c.options.onScrollStart&&c.options.onScrollStart.call(c,a),c._bind(m),c._bind(n),c._bind(o)},_move:function(b){var c=this,e=d?b.touches[0]:b,f=e.pageX-c.pointX,g=e.pageY-c.pointY,h=c.x+f,i=c.y+g,j=b.timeStamp||Date.now();c.options.onBeforeScrollMove&&c.options.onBeforeScrollMove.call(c,b),c.pointX=e.pageX,c.pointY=e.pageY;if(h>0||h<c.maxScrollX)h=c.options.bounce?c.x+f/2:h>=0||c.maxScrollX>=0?0:c.maxScrollX;if(i>0||i<c.maxScrollY)i=c.options.bounce?c.y+g/2:i>=0||c.maxScrollY>=0?0:c.maxScrollY;if(c.absDistX<6&&c.absDistY<6){c.distX+=f,c.distY+=g,c.absDistX=a.abs(c.distX),c.absDistY=a.abs(c.distY);return}c.options.lockDirection&&(c.absDistX>c.absDistY+5?(i=c.y,g=0):c.absDistY>c.absDistX+5&&(h=c.x,f=0)),c.moved=!0,c._pos(h,i),c.dirX=f>0?-1:f<0?1:0,c.dirY=g>0?-1:g<0?1:0,j-c.startTime>300&&(c.startTime=j,c.startX=c.x,c.startY=c.y),c.options.onScrollMove&&c.options.onScrollMove.call(c,b)},_end:function(b){if(d&&b.touches.length!=0)return;var c=this,e=d?b.changedTouches[0]:b,f,g,h={dist:0,time:0},i={dist:0,time:0},j=(b.timeStamp||Date.now())-c.startTime,k=c.x,l=c.y,p;c._unbind(m),c._unbind(n),c._unbind(o),c.options.onBeforeScrollEnd&&c.options.onBeforeScrollEnd.call(c,b);if(!c.moved){if(d){f=e.target;while(f.nodeType!=1)f=f.parentNode;f.tagName!="SELECT"&&f.tagName!="INPUT"&&f.tagName!="TEXTAREA"&&(g=document.createEvent("MouseEvents"),g.initMouseEvent("click",!0,!0,b.view,1,e.screenX,e.screenY,e.clientX,e.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null),g._fake=!0,f.dispatchEvent(g))}c._resetPos(200),c.options.onTouchEnd&&c.options.onTouchEnd.call(c,b);return}if(j<300&&c.options.momentum){h=k?c._momentum(k-c.startX,j,-c.x,c.scrollerW-c.wrapperW+c.x,c.options.bounce?c.wrapperW:0):h,i=l?c._momentum(l-c.startY,j,-c.y,c.maxScrollY<0?c.scrollerH-c.wrapperH+c.y:0,c.options.bounce?c.wrapperH:0):i,k=c.x+h.dist,l=c.y+i.dist;if(c.x>0&&k>0||c.x<c.maxScrollX&&k<c.maxScrollX)h={dist:0,time:0};if(c.y>0&&l>0||c.y<c.maxScrollY&&l<c.maxScrollY)i={dist:0,time:0}}if(h.dist||i.dist){p=a.max(a.max(h.time,i.time),10),c.scrollTo(k,l,p),c.options.onTouchEnd&&c.options.onTouchEnd.call(c,b);return}c._resetPos(200),c.options.onTouchEnd&&c.options.onTouchEnd.call(c,b)},_resetPos:function(a){var b=this,c=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,d=b.y>=0||b.maxScrollY>0?0:b.y<b.maxScrollY?b.maxScrollY:b.y;if(c==b.x&&d==b.y){b.moved&&(b.options.onScrollEnd&&b.options.onScrollEnd.call(b),b.moved=!1);return}b.scrollTo(c,d,a||0)},_mouseout:function(a){var b=a.relatedTarget;if(!b){this._end(a);return}while(b=b.parentNode)if(b==this.wrapper)return;this._end(a)},_transitionEnd:function(a){var b=this;if(a.target!=b.scroller)return;b._unbind("webkitTransitionEnd"),b._startAni()},_startAni:function(){var b=this,c=b.x,d=b.y,e=Date.now(),f,g,h;if(b.animating)return;if(!b.steps.length){b._resetPos(400);return}f=b.steps.shift(),f.x==c&&f.y==d&&(f.time=0),b.animating=!0,b.moved=!0;if(b.options.useTransition){b._transitionTime(f.time),b._pos(f.x,f.y),b.animating=!1,f.time?b._bind("webkitTransitionEnd"):b._resetPos(0);return}h=function(){var j=Date.now(),k,l;if(j>=e+f.time){b._pos(f.x,f.y),b.animating=!1,b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b),b._startAni();return}j=(j-e)/f.time-1,g=a.sqrt(1-j*j),k=(f.x-c)*g+c,l=(f.y-d)*g+d,b._pos(k,l),b.animating&&(b.aniTime=i(h))},h()},_transitionTime:function(a){this.scroller.style[b+"TransitionDuration"]=a+"ms"},_momentum:function(b,c,d,e,f){var g=6e-4,h=a.abs(b)/c,i=h*h/(2*g),j=0,k=0;return b>0&&i>d?(k=f/(6/(i/h*g)),d+=k,h=h*d/i,i=d):b<0&&i>e&&(k=f/(6/(i/h*g)),e+=k,h=h*e/i,i=e),i*=b<0?-1:1,j=h/g,{dist:i,time:a.round(j)}},_offset:function(a){var b=-a.offsetLeft,c=-a.offsetTop;while(a=a.offsetParent)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var a=this;a.scroller.style[b+"Transform"]="",a._unbind(k,window),a._unbind(l),a._unbind(m),a._unbind(n),a._unbind(o),a._unbind("mouseout",a.wrapper),a.options.useTransition&&a._unbind("webkitTransitionEnd"),a.options.onDestroy&&a.options.onDestroy.call(a)},refresh:function(){var a=this,c;a.wrapperW=a.wrapper.clientWidth,a.wrapperH=a.wrapper.clientHeight,a.scrollerW=a.scroller.offsetWidth,a.scrollerH=a.scroller.offsetHeight,a.maxScrollX=a.wrapperW-a.scrollerW,a.maxScrollY=a.wrapperH-a.scrollerH,a.dirX=0,a.dirY=0,a.hScroll=a.options.hScroll&&a.maxScrollX<0,a.vScroll=a.options.vScroll&&(!a.options.bounceLock&&!a.hScroll||a.scrollerH>a.wrapperH),c=a._offset(a.wrapper),a.wrapperOffsetLeft=-c.left,a.wrapperOffsetTop=-c.top,a.scroller.style[b+"TransitionDuration"]="0",a._resetPos(200)},scrollTo:function(a,b,c,d){var e=this,f=a,g,h;e.stop(),f.length||(f=[{x:a,y:b,time:c,relative:d}]);for(g=0,h=f.length;g<h;g++)f[g].relative&&(f[g].x=e.x-f[g].x,f[g].y=e.y-f[g].y),e.steps.push({x:f[g].x,y:f[g].y,time:f[g].time||0});e._startAni()},scrollToElement:function(b,c){var d=this,e;b=b.nodeType?b:d.scroller.querySelector(b);if(!b)return;e=d._offset(b),e.left+=d.wrapperOffsetLeft,e.top+=d.wrapperOffsetTop,e.left=e.left>0?0:e.left<d.maxScrollX?d.maxScrollX:e.left,e.top=e.top>0?0:e.top<d.maxScrollY?d.maxScrollY:e.top,c=c===undefined?a.max(a.abs(e.left)*2,a.abs(e.top)*2):c,d.scrollTo(e.left,e.top,c)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(m),this._unbind(n),this._unbind(o)},enable:function(){this.enabled=!0},stop:function(){j(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1}},typeof exports!="undefined"?exports.iScroll=r:window.iScroll=r})();var requirejs,require,define;(function(){function isFunction(a){return ostring.call(a)==="[object Function]"}function isArray(a){return ostring.call(a)==="[object Array]"}function mixin(a,b,c){for(var d in b)!(d in empty)&&(!(d in a)||c)&&(a[d]=b[d]);return req}function makeError(a,b,c){var d=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return c&&(d.originalError=c),d}function configurePackageDir(a,b,c){var d,e,f;for(d=0;f=b[d];d++)f=typeof f=="string"?{name:f}:f,e=f.location,c&&(!e||e.indexOf("/")!==0&&e.indexOf(":")===-1)&&(e=c+"/"+(e||f.name)),a[f.name]={name:f.name,location:e||f.name,main:(f.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}function jQueryHoldReady(a,b){a.holdReady?a.holdReady(b):b?a.readyWait+=1:a.ready(!0)}function newContext(a){function b(a){var b,c;for(b=0;c=a[b];b++)if(c===".")a.splice(b,1),b-=1;else if(c==="..")if(b!==1||a[2]!==".."&&a[0]!=="..")b>0&&(a.splice(b-1,2),b-=2);else break}function c(a,c){var d,e;return a&&a.charAt(0)==="."&&c&&(v.pkgs[c]?c=[c]:(c=c.split("/"),c=c.slice(0,c.length-1)),a=c.concat(a.split("/")),b(a),e=v.pkgs[d=a[0]],a=a.join("/"),e&&a===d+"/"+e.main&&(a=d)),a}function d(a,b){var d=a?a.indexOf("!"):-1,e=null,f=b?b.name:null,g=a,h,i,j;return d!==-1&&(e=a.substring(0,d),a=a.substring(d+1,a.length)),e&&(e=c(e,f)),a&&(e?(j=z[e],j&&j.normalize?h=j.normalize(a,function(a){return c(a,f)}):h=c(a,f)):(h=c(a,f),i=y[h],i||(i=t.nameToUrl(h,null,b),y[h]=i))),{prefix:e,name:h,parentMap:b,url:i,originalName:g,fullName:e?e+"!"+(h||""):h}}function e(){var a=!0,b=v.priorityWait,c,d;if(b){for(d=0;c=b[d];d++)if(!A[c]){a=!1;break}a&&delete v.priorityWait}return a}function f(a,b,c){return function(){var d=aps.call(arguments,0),e;return c&&isFunction(e=d[d.length-1])&&(e.__requireJsBuild=!0),d.push(b),a.apply(null,d)}}function g(a,b){var c=f(t.require,a,b);return mixin(c,{nameToUrl:f(t.nameToUrl,a),toUrl:f(t.toUrl,a),defined:f(t.requireDefined,a),specified:f(t.requireSpecified,a),isBrowser:req.isBrowser}),c}function h(a){t.paused.push(a)}function j(a){var b,c,e,f,g,h=a.callback,i=a.map,j=i.fullName,k=a.deps,l=a.listeners;if(h&&isFunction(h)){if(v.catchError.define)try{c=req.execCb(j,a.callback,k,z[j])}catch(m){e=m}else c=req.execCb(j,a.callback,k,z[j]);j&&(a.cjsModule&&a.cjsModule.exports!==undefined?c=z[j]=a.cjsModule.exports:c===undefined&&a.usingExports?c=z[j]:(z[j]=c,H[j]&&(I[j]=!0)))}else j&&(c=z[j]=h,H[j]&&(I[j]=!0));B[a.id]&&(delete B[a.id],a.isDone=!0,t.waitCount-=1,t.waitCount===0&&(C=[])),delete F[j],req.onResourceLoad&&!a.placeholder&&req.onResourceLoad(t,i,a.depArray);if(e)return f=(j?d(j).url:"")||e.fileName||e.sourceURL,g=e.moduleTree,e=makeError("defineerror",'Error evaluating module "'+j+'" at location "'+f+'":\n'+e+"\nfileName:"+f+"\nlineNumber: "+(e.lineNumber||e.line),e),e.moduleName=j,e.moduleTree=g,req.onError(e);for(b=0;h=l[b];b++)h(c);return undefined}function k(a,b){return function(c){a.depDone[b]||(a.depDone[b]=!0,a.deps[b]=c,a.depCount-=1,a.depCount||j(a))}}function l(a,b){var c=b.map,d=c.fullName,e=c.name,f=G[a]||(G[a]=z[a]),h;if(b.loading)return;b.loading=!0,h=function(a){b.callback=function(){return a},j(b),A[b.id]=!0,u()},h.fromText=function(a,b){var c=useInteractive;A[a]=!1,t.scriptCount+=1,t.fake[a]=!0,c&&(useInteractive=!1),req.exec(b),c&&(useInteractive=!0),t.completeLoad(a)},d in z?h(z[d]):f.load(e,g(c.parentMap,!0),h,v)}function m(a){B[a.id]||(B[a.id]=a,C.push(a),t.waitCount+=1)}function n(a){this.listeners.push(a)}function o(a,b){var c=a.fullName,e=a.prefix,f=e?G[e]||(G[e]=z[e]):null,g,i,k;return c&&(g=F[c]),g||(i=!0,g={id:(e&&!f?E++ +"__p@:":"")+(c||"__r@"+E++),map:a,depCount:0,depDone:[],depCallbacks:[],deps:[],listeners:[],add:n},x[g.id]=!0,c&&(!e||G[e])&&(F[c]=g)),e&&!f?(k=o(d(e),!0),k.add(function(b){var c=d(a.originalName,a.parentMap),e=o(c,!0);g.placeholder=!0,e.add(function(a){g.callback=function(){return a},j(g)})})):i&&b&&(A[g.id]=!1,h(g),m(g)),g}function p(a,b,c,e){var f=d(a,e),h=f.name,i=f.fullName,l=o(f),n=l.id,p=l.deps,q,r,s,u,w;if(i){if(i in z||A[n]===!0||i==="jquery"&&v.jQuery&&v.jQuery!==c().fn.jquery)return;x[n]=!0,A[n]=!0,i==="jquery"&&c&&jQueryCheck(c())}l.depArray=b,l.callback=c;for(q=0;q<b.length;q++)r=b[q],r&&(r=d(r,h?f:e),s=r.fullName,u=r.prefix,b[q]=s,s==="require"?p[q]=g(f):s==="exports"?(p[q]=z[i]={},l.usingExports=!0):s==="module"?l.cjsModule=w=p[q]={id:h,uri:h?t.nameToUrl(h,null,e):undefined,exports:z[i]}:!(s in z)||s in B||i in H&&!(i in H&&I[s])?(i in H&&(H[s]=!0,delete z[s],D[r.url]=!1),l.depCount+=1,l.depCallbacks[q]=k(l,q),o(r,!0).add(l.depCallbacks[q])):p[q]=z[s]);l.depCount?m(l):j(l)}function q(a){p.apply(null,a)}function r(a,b){if(a.isDone)return undefined;var c=a.map.fullName,e=a.depArray,f,g,h,i,j,k;if(c){if(b[c])return z[c];b[c]=!0}if(e)for(f=0;f<e.length;f++)g=e[f],g&&(i=d(g).prefix,i&&(j=B[i])&&r(j,b),h=B[g],h&&!h.isDone&&A[g]&&(k=r(h,b),a.depCallbacks[f](k)));return c?z[c]:undefined}function s(){var a=v.waitSeconds*1e3,b=a&&t.startTime+a<(new Date).getTime(),c="",d=!1,f=!1,g,h,j;if(t.pausedCount>0)return undefined;if(v.priorityWait)if(e())u();else return undefined;for(g in A)if(!(g in empty)){d=!0;if(!A[g])if(b)c+=g+" ";else{f=!0;break}}if(!d&&!t.waitCount)return undefined;if(b&&c)return h=makeError("timeout","Load timeout for modules: "+c),h.requireType="timeout",h.requireModules=c,req.onError(h);if(f||t.scriptCount)return(isBrowser||isWebWorker)&&!checkLoadedTimeoutId&&(checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0,s()},50)),undefined;if(t.waitCount){for(i=0;j=C[i];i++)r(j,{});t.paused.length&&u(),checkLoadedDepth<5&&(checkLoadedDepth+=1,s())}return checkLoadedDepth=0,req.checkReadyState(),undefined}var t,u,v={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},catchError:{}},w=[],x={require:!0,exports:!0,module:!0},y={},z={},A={},B={},C=[],D={},E=0,F={},G={},H={},I={},J=0;return jQueryCheck=function(a){if(!t.jQuery){var b=a||(typeof jQuery!="undefined"?jQuery:null);if(b){if(v.jQuery&&b.fn.jquery!==v.jQuery)return;if("holdReady"in b||"readyWait"in b)t.jQuery=b,q(["jquery",[],function(){return jQuery}]),t.scriptCount&&(jQueryHoldReady(b,!0),t.jQueryIncremented=!0)}}},u=function(){var a,b,c,d,f,g,h;J+=1,t.scriptCount<=0&&(t.scriptCount=0);while(w.length){g=w.shift();if(g[0]===null)return req.onError(makeError("mismatch","Mismatched anonymous define() module: "+g[g.length-1]));q(g)}if(!v.priorityWait||e())while(t.paused.length){f=t.paused,t.pausedCount+=f.length,t.paused=[];for(d=0;a=f[d];d++)b=a.map,c=b.url,h=b.fullName,b.prefix?l(b.prefix,a):!D[c]&&!A[h]&&(req.load(t,h,c),D[c]=!0);t.startTime=(new Date).getTime(),t.pausedCount-=f.length}return J===1&&s(),J-=1,undefined},t={contextName:a,config:v,defQueue:w,waiting:B,waitCount:0,specified:x,loaded:A,urlMap:y,urlFetched:D,scriptCount:0,defined:z,paused:[],pausedCount:0,plugins:G,needFullExec:H,fake:{},fullExec:I,managerCallbacks:F,makeModuleMap:d,normalize:c,configure:function(a){var b,c,d,e,f,g;a.baseUrl&&a.baseUrl.charAt(a.baseUrl.length-1)!=="/"&&(a.baseUrl+="/"),b=v.paths,d=v.packages,e=v.pkgs,mixin(v,a,!0);if(a.paths){for(c in a.paths)c in empty||(b[c]=a.paths[c]);v.paths=b}f=a.packagePaths;if(f||a.packages){if(f)for(c in f)c in empty||configurePackageDir(e,f[c],c);a.packages&&configurePackageDir(e,a.packages),v.pkgs=e}a.priority&&(g=t.requireWait,t.requireWait=!1,t.takeGlobalQueue(),u(),t.require(a.priority),u(),t.requireWait=g,v.priorityWait=a.priority),(a.deps||a.callback)&&t.require(a.deps||[],a.callback)},requireDefined:function(a,b){return d(a,b).fullName in z},requireSpecified:function(a,b){return d(a,b).fullName in x},require:function(b,c,e){var f,g,h;if(typeof b=="string")return isFunction(c)?req.onError(makeError("requireargs","Invalid require call")):req.get?req.get(t,b,c):(f=b,e=c,h=d(f,e),g=h.fullName,g in z?z[g]:req.onError(makeError("notloaded","Module name '"+h.fullName+"' has not been loaded yet for context: "+a)));(b&&b.length||c)&&p(null,b,c,e);if(!t.requireWait)while(!t.scriptCount&&t.paused.length)t.takeGlobalQueue(),u();return t.require},takeGlobalQueue:function(){globalDefQueue.length&&(apsp.apply(t.defQueue,[t.defQueue.length-1,0].concat(globalDefQueue)),globalDefQueue=[])},completeLoad:function(a){var b;t.takeGlobalQueue();while(w.length){b=w.shift();if(b[0]===null){b[0]=a;break}if(b[0]===a)break;q(b),b=null}b?q(b):q([a,[],a==="jquery"&&typeof jQuery!="undefined"?function(){return jQuery}:null]),jQueryCheck(),req.isAsync&&(t.scriptCount-=1),u(),req.isAsync||(t.scriptCount-=1)},toUrl:function(a,b){var c=a.lastIndexOf("."),d=null;return c!==-1&&(d=a.substring(c,a.length),a=a.substring(0,c)),t.nameToUrl(a,d,b)},nameToUrl:function(a,b,d){var e,f,g,h,i,j,k,l,m=t.config;a=c(a,d&&d.fullName);if(req.jsExtRegExp.test(a))l=a+(b?b:"");else{e=m.paths,f=m.pkgs,i=a.split("/");for(j=i.length;j>0;j--){k=i.slice(0,j).join("/");if(e[k]){i.splice(0,j,e[k]);break}if(g=f[k]){a===g.name?h=g.location+"/"+g.main:h=g.location,i.splice(0,j,h);break}}l=i.join("/")+(b||".js"),l=(l.charAt(0)==="/"||l.match(/^\w+:/)?"":m.baseUrl)+l}return m.urlArgs?l+((l.indexOf("?")===-1?"?":"&")+m.urlArgs):l}},t.jQueryCheck=jQueryCheck,t.resume=u,t}function getInteractiveScript(){var a,b,c;if(interactiveScript&&interactiveScript.readyState==="interactive")return interactiveScript;a=document.getElementsByTagName("script");for(b=a.length-1;b>-1&&(c=a[b]);b--)if(c.readyState==="interactive")return interactiveScript=c;return null}var version="1.0.1",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/require\(\s*["']([^'"\s]+)["']\s*\)/g,currDirRegExp=/^\.\//,jsSuffixRegExp=/\.js$/,ostring=Object.prototype.toString,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=typeof window!="undefined"&&!!navigator&&!!document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",empty={},contexts={},globalDefQueue=[],interactiveScript=null,checkLoadedDepth=0,useInteractive=!1,req,cfg={},currentlyAddingScript,s,head,baseElement,scripts,script,src,subPath,mainScript,dataMain,i,ctx,jQueryCheck,checkLoadedTimeoutId;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(a,b){var c=defContextName,d,e;return!isArray(a)&&typeof a!="string"&&(e=a,isArray(b)?(a=b,b=arguments[2]):a=[]),e&&e.context&&(c=e.context),d=contexts[c]||(contexts[c]=newContext(c)),e&&d.configure(e),d.require(a,b)},req.config=function(a){return req(a)},require||(require=req),req.toUrl=function(a){return contexts[defContextName].toUrl(a)},req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,s=req.s={contexts:contexts,skipAsync:{}},req.isAsync=req.isBrowser=isBrowser,isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(a){throw a},req.load=function(a,b,c){req.resourcesReady(!1),a.scriptCount+=1,req.attach(c,a,b),a.jQuery&&!a.jQueryIncremented&&(jQueryHoldReady(a.jQuery,!0),a.jQueryIncremented=!0)},define=function(a,b,c){var d,e;return typeof a!="string"&&(c=b,b=a,a=null),isArray(b)||(c=b,b=[]),!b.length&&isFunction(c)&&c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(c.length===1?["require"]:["require","exports","module"]).concat(b)),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),(e?e.defQueue:globalDefQueue).push([a,b,c]),undefined},define.amd={multiversion:!0,plugins:!0,jQuery:!0},req.exec=function(text){return eval(text)},req.execCb=function(a,b,c,d){return b.apply(d,c)},req.addScriptToDom=function(a){currentlyAddingScript=a,baseElement?head.insertBefore(a,baseElement):head.appendChild(a),currentlyAddingScript=null},req.onScriptLoad=function(a){var b=a.currentTarget||a.srcElement,c,d,e;if(a.type==="load"||b&&readyRegExp.test(b.readyState))interactiveScript=null,c=b.getAttribute("data-requirecontext"),d=b.getAttribute("data-requiremodule"),e=contexts[c],contexts[c].completeLoad(d),b.detachEvent&&!isOpera?b.detachEvent("onreadystatechange",req.onScriptLoad):b.removeEventListener("load",req.onScriptLoad,!1)},req.attach=function(a,b,c,d,e,f){var g;return isBrowser?(d=d||req.onScriptLoad,g=b&&b.config&&b.config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),g.type=e||"text/javascript",g.charset="utf-8",g.async=!s.skipAsync[a],b&&g.setAttribute("data-requirecontext",b.contextName),g.setAttribute("data-requiremodule",c),g.attachEvent&&!isOpera?(useInteractive=!0,f?g.onreadystatechange=function(a){g.readyState==="loaded"&&(g.onreadystatechange=null,g.attachEvent("onreadystatechange",d),f(g))}:g.attachEvent("onreadystatechange",d)):g.addEventListener("load",d,!1),g.src=a,f||req.addScriptToDom(g),g):(isWebWorker&&(importScripts(a),b.completeLoad(c)),null)};if(isBrowser){scripts=document.getElementsByTagName("script");for(i=scripts.length-1;i>-1&&(script=scripts[i]);i--){head||(head=script.parentNode);if(dataMain=script.getAttribute("data-main")){cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript.replace(jsSuffixRegExp,"")),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain];break}}}req.checkReadyState=function(){var a=s.contexts,b;for(b in a)if(!(b in empty)&&a[b].waitCount)return;req.resourcesReady(!0)},req.resourcesReady=function(a){var b,c,d;req.resourcesDone=a;if(req.resourcesDone){b=s.contexts;for(d in b)d in empty||(c=b[d],c.jQueryIncremented&&(jQueryHoldReady(c.jQuery,!1),c.jQueryIncremented=!1))}},req.pageLoaded=function(){document.readyState!=="complete"&&(document.readyState="complete")},isBrowser&&document.addEventListener&&(document.readyState||(document.readyState="loading",window.addEventListener("load",req.pageLoaded,!1))),req(cfg),req.isAsync&&typeof setTimeout!="undefined"&&(ctx=s.contexts[cfg.context||defContextName],ctx.requireWait=!0,setTimeout(function(){ctx.requireWait=!1,ctx.takeGlobalQueue(),ctx.jQueryCheck(),ctx.scriptCount||ctx.resume(),req.checkReadyState()},0))})(),define("requireLib",function(){}),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=Array.prototype.slice,n=Object.prototype.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a=typeof (typeof console!="undefined"&&console!==null?console.error:void 0)=="function"&&function(a){return console.error(a)}||function(){},e=this,c=e.document||{createElement:function(){}},i=typeof Node=="object"?function(a){return a instanceof Node}:function(a){return typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.nodeName=="string"},h=Array.isArray?Array.isArray:function(){var a;return a=Array.prototype.push,function(a){return a.push===push&&a.length!=null}}(),f=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},g=function(){return c.createElement("div")},l=g(),k=function(b,d){var e,f;while(d.length>0)(e=d.shift())!=null&&(i(e)?b.appendChild(e):(f=typeof e)==="string"||f==="number"?b.appendChild(c.createTextNode(e)):h(e)?Array.prototype.unshift.apply(d,e):a("renderNodes: unsupported child type = "+e));return b},e.cell=b=function(){function b(a){var b,c,d,e,g,i,j,l,m,n,o;this.options=a!=null?a:{},this.options.model!=null&&(this.model=this.options.model),typeof this.init=="function"&&this.init(this.options),this.$el=jQuery(this.el=this._tag());if(g=this.options.id)this.el.id=g;n=[this.cell.prototype.name,this["class"],this.options["class"]];for(e=0,m=n.length;e<m;e++)j=n[e],j&&(this.el.className+=e&&" "+j||j);k(this.el,h(l=typeof this.render=="function"?this.render(this.$R):void 0)&&l||[]),o=this.on;for(b in o)d=o[b],typeof d=="function"&&(i=/^([A-z]+)(\s(.*))?$/.exec(b))&&(c=i[1])&&this.$el.on(c,i[3],f(d,this));typeof this.afterRender=="function"&&this.afterRender();return}return b.prototype.$=function(a){return jQuery(a,this.el)},b.prototype.$R=function(){var b,d,e,f,g,h,j,n;b=arguments[0],d=arguments[1],e=3>arguments.length?[]:m.call(arguments,2);if(b)return(d!=null?d.constructor:void 0)!==Object&&(e.unshift(d),d=void 0),j=function(){if(typeof b=="string"){if(h=/^(\w+)?(#([\w\-]+))*(\.[\w\.\-]+)?$/.exec(b)){f=c.createElement(h[1]||"div");if(n=h[3])f.id=n;if(d){"class"in d&&(f.className+=d["class"],delete d["class"]);for(g in d)n=d[g],f.setAttribute(g,n)}if(n=h[4])f.className+=n.replace(/\./g," ");return f}return/^<[A-z]/.test(b)?(l.innerHTML=b,l.children[0]):a("renderParent: unsupported parent string = '"+b+"'")}return b.prototype.cell===b?(new b(d)).el:i(b)?b:a("renderParent: unsupported parent type = "+b)}(),j&&k(j,e)},b}(),b.extend=function(a){var d,e,f,h,i,j,k;a==null&&(a={});if(typeof a!="object")throw"cell.extend(): expects an object {render,init,name}";if(a.init&&typeof a.init!="function"||a.render&&typeof a.render!="function")throw"cell.extend(): expects {render,init} to be functions";d=function(){function a(){a.__super__.constructor.apply(this,arguments)}return o(a,b),a}();for(i in a)k=a[i],d.prototype[i]=k;return d.prototype.cell=d,d.prototype._tag=(j=typeof a.tag)==="string"?function(){return l.innerHTML=a.tag,l.children[0]||g()}:j==="function"?function(){return l.innerHTML=this.tag(),l.children[0]||g()}:g,typeof (e=a.css)=="string"?(h=c.createElement("style"),h.innerHTML=e):typeof (f=a.css_href)=="string"&&(h=c.createElement("link"),h.href=f,h.rel="stylesheet"),h&&(h.type="text/css",$("head")[0].appendChild(h)),d};if(typeof define=="function"&&typeof require=="function"){j=/(.*\/)?(.*)$/,define("cell",[],d={pluginBuilder:"cell-builder-plugin",load:function(c,e,f,g){e([c],function(g){var h,i;typeof g!="object"?a("Couldn't load "+c+" cell. cell definitions should be objects, but instead was "+typeof g):(g.name=j.exec(c)[2],((h=d.__preinstalledCells__)!=null?h[c]:void 0)==null&&(i=g.css_href)==null&&(g.css_href=e.toUrl(""+c+".css")),typeof g["extends"]=="string"?e(["cell!"+g["extends"]],function(a){a.prototype.name&&(g["class"]=a.prototype.name+(" "+g["class"])||""),f(a.extend(g))}):f(b.extend(g)))})}}),jQuery(c).ready(function(){jQuery("[data-cell]").each(function(){var a,b,c,d,f,g=this;if(d=this.getAttribute("data-cell")){f={},b=/(^\?cachebust)|(&cachebust)/.test(e.location.search),((c=this.getAttribute("data-cell-cachebust"))!==null||b)&&c!=="false"&&(f.urlArgs="bust="+(new Date).getTime());if(a=this.getAttribute("data-cell-baseurl"))f.baseUrl=a;require(f,["cell!"+d],function(a){jQuery(g).append((new a).el)})}})});return}}.call(this),define("AppConfig",["cell!pages/schedule/Schedule"],function(){return{contexts:{Schedule:{defaultPagePath:"pages/schedule/Schedule"},Watch:{defaultPagePath:"pages/watch/Watch"},Search:{defaultPagePath:"pages/watch/Watch"}},defaultContext:"Schedule"}});var __slice=Array.prototype.slice;define("data/JSONP",[],function(){var a,b,c,d;return b=function(a){return a},d=0,c=function(a){var b,c,e;return b="__jsonp"+ ++d,window[b]=function(c){return a.success(c),window[b]=void 0,$("#"+b).remove()},(e=a.callback)==null&&(a.callback="callback"),c=document.createElement("script"),c.id=b,c.setAttribute("type","text/javascript"),c.setAttribute("src",""+a.url+(a.url.indexOf("?")===-1&&"?"||"&")+a.callback+"="+b),$("head").append(c)},a=window.location.search.indexOf("mock-service=true")>-1?function(a,b){var c,d;return c=a.mock,d=a.real,setTimeout(function(){return require([c],function(a){return b(function(){return typeof a=="function"?a(d):a}())})},0)}:function(a,b){var d;return d=a.real,c({callback:"jsonp",url:d,success:b||function(){}})},{JSONPService:function(){function c(c,d){var e,f,g,h,i,j,k=this;e=d.baseURL,i=d.process,f=d.methods,i==null&&(i=b),j=function(d,f){var g,h,j;return h=i,g=b,(j=typeof f)==="object"&&j!=="function"&&(f.process!=null&&(h=f.process),f=f.path,f.getCache!=null&&(g=f.getCache)),typeof f=="string"&&function(){var a;return a=f,f=function(){return a}}(),k[d]=function(){var i,j,k,l;i=2>arguments.length?(l=0,[]):__slice.call(arguments,0,l=arguments.length-1),k=arguments[l++],k==null&&(k=b),(j=g())!==void 0?k(j):a({mock:"data/mock/"+c+"/"+d,real:e+f.apply(null,i)},function(a){a=h(a),k(a)})}};for(g in f)h=f[g],j(g,h);return}return c}()}}),define("data/UserService",["data/JSONP"],function(a){var b,c;return b=a.JSONPService,c="pwong",new b("users",{baseURL:"api/users/",methods:{getWatchedShows:function(){return""+c+"/watched-shows"},getShows:function(a){return""+c+"/schedule/"+(a.getYear()+1900)+"-"+a.getMonth()+"-"+a.getDate()}}})}),define("data/ActorService",["data/JSONP"],function(a){var b;return b=a.JSONPService,new b("actors",{baseURL:"api/actors/",methods:{getDetails:function(a){return""+a}}})}),define("data/ShowService",["data/JSONP"],function(a){var b;return b=a.JSONPService,new b("shows",{baseURL:"api/shows/",methods:{getDetails:function(a){return""+a}}})}),define("Services",["data/UserService","data/ActorService","data/ShowService"],function(a,b,c){return{user:a,show:c,actor:b}}),define("shared/DateHelper",[],function(){var a,b,c;return c=new Date,b=["Today","Yesterday"].concat(function(){var b;b=[];for(a=2;a<7;a++)b.push(""+a+" days ago");return b}(),"a week ago"),{getDisplayable:function(a){return c.getYear()===a.getYear()&&c.getMonth()===a.getMonth()?b[c.getDate()-a.getDate()]:a.toLocaleDateString()}}}),define("pages/schedule/Schedule",["require","Services","shared/DateHelper","cell!shared/ListView"],function(a,b,c,d){var e;return e="pages/showdetails/ShowDetails",{init:function(){var a=this;return this.model.set({title:c.getDisplayable(new Date)}),this.model.bind({activate:function(){return a.$("#ShowList").trigger("resetActive")}})},render:function(c){var f=this;return b.user.getShows(new Date,function(b){var g;return f.$el.append(c(d,{id:"ShowList",list:function(){var a,c,d;d=[];for(a=0,c=b.length;a<c;a++)g=b[a],d.push({link:""+e+"?id="+g.id+"&title="+g.title,text:g.title});return d}()})),f.model.trigger("refreshScroller"),a([e],function(){})})}}}),define("shared/ListView",{tag:"<ul>",render:function(a,b){var c,d,e,f,g,h,i,j;if(e=this.options.list){j=[];for(g=0,h=e.length;g<h;g++){i=e[g],f=i.text,d=i.link,c=i.dividerText;if(f||c)f?j.push(a("<li data-navto='"+d+"'>",a("div"),f)):j.push(a("li.divider",c))}return j}},on:{resetActive:function(){return this.$("li.active").removeClass("active").addClass("deactive")},"webkitAnimationEnd li > div":function(){return this.$("li.deactive").removeClass("deactive")},"click li":function(a){var b;return b=a.target,this.$("li.active").removeClass("active"),$(b).closest("li").addClass("active")}}}),define("HashDelegate",{set:function(a){return window.location.hash=a},get:function(){return window.location.hash},onChange:function(a){return $(window).on("hashchange",a)}}),define("framework/Model",[],function(){var a,b,c;return b=/^change:(.*)/,c=function(a,b){var c,d,e;for(d=0,e=a.length;d<e;d++){c=a[d];if(c===b)return}return a.unshift(b)},a=function(){function a(a){var b,c;this._ls={};for(b in a)c=a[b],this[b]=c;return}
var d,e;return a.pathObj=e=function(a,b){if(a){for(var c=0,d=b.length;c<d&&(a=a[b[c]])!=null;c++);return a}},a.parsePropChange=d=function(a){var c,d;return(c=b.exec(a))!=null?(d=c[1])!=null?d.split("."):void 0:void 0},a.prototype.set=function(a,b){var c,d,e;for(c in a){e=a[c];if(this[c]!==e){d=this[c];try{this.trigger({cur:this[c]=e,prev:d,property:c,type:"change:"+c,data:b})}catch(f){}}}},a.prototype.trigger=function(a,b){var c,d,e,f,g;c=typeof a=="string"?{type:a,data:b}:a,c.model=this;if(e=this._ls[c.type])for(f=0,g=e.length;f<g;f++){d=e[f];try{d(c)}catch(h){}}},a.prototype.bindAndCall=function(b){var f,g,h,i;g=this,i=function(b){var f,i,j,k,l,m,n,o,p,q,r,s,t;if(m=d(h)){i=m.length-1,p=m[i],l=m.slice(0,i),n=function(a,b){var d,e,f;return c((f=(d=b._ls)[e="change:"+m[a]])!=null?f:d[e]=[],o[a])},j=g,o=[],r=function(c){o[c]=function(d){for(var e=c,f=d.cur,g=d.prev,h=d.model;e++<i;f=(h=f)&&f[m[e]],g=g&&g[m[e]])f instanceof a&&n(e,f);var j;return j={cur:f,prev:g,property:p,type:"change:"+p,model:h,data:d.data},c!==i&&(j.parentEvent=d),b(j)};if(j instanceof a)return n(c,j),j=j[k]};for(f=0,s=m.length;f<s;f++)k=m[f],r(f);try{return b({cur:j,property:p,type:h,model:e(g,l)})}catch(u){return console.error((u!=null?u.stack:void 0)||u)}}else{c((t=(q=g._ls)[h])!=null?t:q[h]=[],b);try{return b({type:h,model:g})}catch(v){}}};for(h in b)f=b[h],i(f)},a.prototype.bind=function(b){var e,f,g,h,i,j,k,l,m,n,o,p;for(j in b){f=b[j];if(i=d(j)){g=this,o=i.slice(0,-1);for(m=0,n=o.length;m<n;m++)h=o[m],(k=g[h])instanceof a&&(e={},e["change:"+h]=function(a){var b,c;b=a.cur,c=a.prev},k.bind(e))}c((p=(l=this._ls)[j])!=null?p:l[j]=[],f)}},a.prototype.unbind=function(a){var b,c,d,e,f,g,h;h=[];for(f in a){b=a[f];if(e=this._ls[f])for(c=0,g=e.length;c<g;c++){d=e[c];if(d===b){delete e[c];return}}}return h},a}()}),define("framework/Nav",["AppConfig","HashDelegate","./Model"],function(a,b,c){var d,e,f,g,h,i,j;g=/^\#([^!^?]+)(!([^?]+))?(\?(.+))?/,j=void 0,d=new c({toHash:i=function(b){var c,d,e,f,g,h,i,j;c=b.context,h=b.page,e=b.data,d=a.contexts[c]&&c||a.defaultContext,f="#"+d+"!"+(h||a.contexts[d].defaultPagePath);if(e){i="?";for(g in e)j=e[g],f+=""+i+g+"="+encodeURIComponent(j),i="&"}return f},parseHash:h=function(b){var c,d,e,f;return f=g.exec(b),{hash:b,context:c=(d=f!=null?f[1]:void 0)&&a.contexts[d]?d:a.defaultContext,page:(e=f!=null?f[3]:void 0)&&e.substr(-1)!=="/"?e:a.contexts[c].defaultPagePath,data:function(){var a,b,c,d,e,g,h,i,j;a={};if(b=f!=null?f[5]:void 0){i=b.split("&");for(g=0,h=i.length;g<h;g++)d=i[g],j=d.split("="),c=j[0],e=j[1],a[c]=decodeURIComponent(e);a}return a}()}},current:new c(h(b.get())),canBack:function(){var a;return((a=e[d.current.context])!=null?a.length:void 0)>1},goBack:function(){var a;a=e[d.current.context];if(a.length>1)return j=a[1],b.set(j.hash)},goTo:function(a){return b.set(""+d.current.context+"!"+a)},switchContext:function(c){var f;if(typeof c=="string"&&(f=e[c])&&d.current.context!==c)return b.set(i(f[0]||{context:c,page:a.contexts[c].defaultPage}))}}),window.ctxHists=e={};for(f in a.contexts)e[f]=[];return e[d.current.context].push(d.current),d.bind({"change:current":function(a){var b,c,e;b={};for(c in a)e=a[c],b[c]=e;return b.type="change:current[context="+a.cur.context+"]",d.trigger(b)}}),b.onChange(function(){var a,f,g,h,i;f=new c(d.parseHash(b.get())),a=e[f.context];if(d.current.context!==f.context)return j=void 0,d.set({current:f},{isBack:!1,isContextSwitch:!0});if(j){g=0;while(a[g].hash!==j.hash)++g;return f=j,j=void 0,a.splice(0,g),d.set({current:f},{isBack:!0,isContextSwitch:!1})}if(f.hash===((h=a[1])!=null?h.hash:void 0))return j=void 0,a.splice(0,1),d.set({current:f},{isBack:!0,isContextSwitch:!1});if(a.length<1||((i=a[0])!=null?i.hash:void 0)!==f.hash)return j=void 0,a.unshift(f),d.set({current:f},{isBack:!1,isContextSwitch:!1})}),d});var __hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("framework/ContextModel",["./Model"],function(a){var b;return b=function(){function b(c){var d,e,f,g,h,i,j,k=this;h=c.id,i=c.initialHash,g=c.hashManager,f=c.defaultPagePath,b.__super__.constructor.call(this,{id:h,defaultPagePath:f,currentPageModel:e=new a(i),pageHistory:j=[e]}),(d={})["change:current[context="+h+"]"]=function(b){var c,d,e,f;return c=b.cur,e=b.prev,(d=c.context!==(e!=null?e.context:void 0))||(((f=j[1])!=null?f.hash:void 0)===c.hash?j.splice(0,1):j.unshift(new a(c))),k.set({currentPageModel:j[0]},{isContextSwitch:d})},g.bind(d)}return __extends(b,a),b}()}),define("framework/Context",["require","./Model","./Nav","cell!./Page"],function(a,b,c,d){return{tag:function(){return"<div data-ctxid='"+this.options.contextid+"'>"},afterRender:function(){var a,e,f,g,h;return h={},f=null,a=this.$el,e={},g=e["change:current[context="+this.options.contextid+"]"]=function(c){var e,g,i,j,k,l,m,n;return e=c.cur,k=c.prev,n=c.data,g=n.isBack,i=h[e.hash],l=k&&h[k.hash],l&&(delete h[k.hash],l.$el.bind("webkitAnimationEnd",function(){return l.$el.remove()})),i||(i=h[e.hash]=new d({model:new b(e)})),i.$el.prependTo(a),j="Page",j+=" animate "+((k!=null?k.context:void 0)===e.context?(m=g&&"-reverse"||"",f!=null?f.$el.attr("class","Page animate headingOut"+m):void 0,f!=null?f.model.trigger("deactivate"):void 0,"headingIn"+m):"fadeIn"),i.$el.attr("class",j),(f=i).model.trigger({type:"activate",isback:g})},c.bind(e),g({cur:this.options.initialHash,data:{isBack:!1}})}}}),define("framework/Page",["require","./Nav"],function(a,b){return{tag:function(){return"<div data-cellpath='"+this.model.page+"'>"},render:function(b){var c=this;return a(["cell!"+this.model.page],function(a){return c.$el.append(b(a,{model:c.model})),c.pageRendered()})},pageRendered:function(){var a,b,c=this;return a=!0,this.model.bind({deactivate:function(){return a=!1}}),this.model.bind({activate:function(){return a=!0,c.$el.css("visibility","visible")}}),this.$el.bind("webkitAnimationEnd",function(){if(!a)return c.$el.css("visibility","hidden")}),b=new iScroll(this.el),this.model.bindAndCall({refreshScroller:function(){return b.refresh()}})},on:{"click *[data-navto]":function(a){var c;return c=a.target,b.goTo($(c).closest("[data-navto]").data("navto"))}}}}),require(["cell"],function(a){a.__preinstalledCells__={"framework/App":0,"pages/schedule/Schedule":0,"shared/ListView":0,"framework/Context":0,"framework/ContextNavBar":0,"framework/Page":0,"framework/TitleBar":0}});var hideAddressBar,ua;document.addEventListener("touchmove",function(a){return a.preventDefault()}),hideAddressBar=function(){var a,b,c=this;return a=0,setTimeout(b=function(){if(++a===1)return window.scrollTo(0,1)},500),$(window).bind("resize",function(){return a=0,b()})},$("body").attr("class",(ua=navigator.userAgent).match(/iPhone/i)||ua.match(/iPod/i)||ua.match(/iPad/i)?window.navigator.standalone?"IOSFullScreen":(hideAddressBar(),"IOS"):(hideAddressBar(),"ANDROID")),define("framework/App",["./Nav","./Model","./ContextModel","cell!./Context","cell!./ContextNavBar","cell!./TitleBar"],function(a,b,c,d,e,f){var g;return g={},{render:function(a,b){return[a(f),a("#content"),a(e)]},afterRender:function(){var b,c=this;return b=this.$("#content"),a.bindAndCall({"change:current":function(a){var e,f,h,i,j,k,l;f=a.cur,j=a.prev,h=a.data,i=h?h!=null?h.isContextSwitch:void 0:!0,i&&((e=g[f.context])||(e=g[f.context]=new d({contextid:f.context,initialHash:f}),b.append(e.$el)),e.$el.toggle(!0),(k=j!=null?j.context:void 0)&&(l=g[k])!=null&&l.$el.toggle(!1),e?(c.$("#content > .activeTab").removeClass("activeTab"),e.$el.toggle(!0).toggleClass("activeTab",!0)):typeof console!="undefined"&&console!==null&&typeof console.log=="function"&&console.log("Could not switch to context = '"+f.context+"'"))}})}}}),define("framework/ContextNavBar",["AppConfig","./Nav"],function(a,b){return{tag:"<ul>",render:function(b,c){var d,e;return[function(){var c,f;c=a.contexts,f=[];for(d in c)e=c[d].text,f.push(b("<li data-ctxid='"+d+"'>",e||d));return f}()]},on:{"click li":function(a){var c;return c=a.target,$("li.active").removeClass("active"),b.switchContext($(c).addClass("active").data("ctxid"))}}}}),define("framework/TitleBar",["framework/Nav"],function(a){return{render:function(a,b){return[a("#backbutton",a("span","Back")),a("#titles",a("#title"),a("#prevtitle")),a("#gobutton",a("span","Do It"))]},afterRender:function(){var b,c,d,e,f,g,h=this;return f=!1,b=this.$("#backbutton"),c=this.$("#backbutton > span"),e=this.$("#title"),d=this.$("#prevtitle"),g={},e.bind("webkitAnimationEnd",function(){return e.attr("class",""),d.attr("class",""),f=!1}),a.bindAndCall({"change:current.title":function(c){var g,h,i,j,k,l;g=c.cur,j=c.prev,h=c.data,i=h!=null?h.isBack:void 0,k=j,e.html(g||"");if(!f)return b.css("visibility",a.canBack()&&"visible"||"hidden"),l=i&&"-reverse"||"",k&&d.html(k).attr("class","animate headingOutFade"+l),e.attr("class","animate headingInFade"+l),f=!0}})},on:{"click #backbutton":function(){return a.goBack()}}}});