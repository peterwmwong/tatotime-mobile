(function(){var a=Math,b=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",c="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,d="ontouchstart"in window,e=b+"Transform"in document.documentElement.style,f=/iphone|ipad/gi.test(navigator.appVersion),g=/playbook/gi.test(navigator.appVersion),h=f||g,i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,17)}}(),j=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),k="onorientationchange"in window?"orientationchange":"resize",l=d?"touchstart":"mousedown",m=d?"touchmove":"mousemove",n=d?"touchend":"mouseup",o=d?"touchcancel":"mouseup",p="translate"+(c?"3d(":"("),q=c?",0)":")",r=function(a,c){var f=this,g=document,i;f.wrapper=typeof a=="object"?a:g.getElementById(a),f.wrapper.style.overflow="hidden",f.scroller=f.wrapper.children[0],f.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in c)f.options[i]=c[i];f.x=f.options.x,f.y=f.options.y,f.options.useTransform=e?f.options.useTransform:!1,f.options.hScrollbar=f.options.hScroll&&f.options.hScrollbar,f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar,f.options.useTransition=h&&f.options.useTransition,f.scroller.style[b+"TransitionProperty"]=f.options.useTransform?"-"+b.toLowerCase()+"-transform":"top left",f.scroller.style[b+"TransitionDuration"]="0",f.scroller.style[b+"TransformOrigin"]="0 0",f.options.useTransition&&(f.scroller.style[b+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),f.options.useTransform?f.scroller.style[b+"Transform"]=p+f.x+"px,"+f.y+"px"+q:f.scroller.style.cssText+=";position:absolute;top:"+f.y+"px;left:"+f.x+"px",f.refresh(),f._bind(k,window),f._bind(l),d||f._bind("mouseout",f.wrapper)};r.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,handleEvent:function(a){var b=this;switch(a.type){case l:if(!d&&a.button!==0)return;b._start(a);break;case m:b._move(a);break;case n:case o:b._end(a);break;case k:b._resize();break;case"mouseout":b._mouseout(a);break;case"webkitTransitionEnd":b._transitionEnd(a)}},_resize:function(){this.refresh()},_pos:function(c,d){c=this.hScroll?c:0,d=this.vScroll?d:0,this.options.useTransform?this.scroller.style[b+"Transform"]=p+c+"px,"+d+"px"+q+" scale("+this.scale+")":(c=a.round(c),d=a.round(d),this.scroller.style.left=c+"px",this.scroller.style.top=d+"px"),this.x=c,this.y=d},_start:function(a){var c=this,e=d?a.touches[0]:a,f,g,h;if(!c.enabled)return;c.options.onBeforeScrollStart&&c.options.onBeforeScrollStart.call(c,a),c.options.useTransition&&c._transitionTime(0),c.moved=!1,c.animating=!1,c.zoomed=!1,c.distX=0,c.distY=0,c.absDistX=0,c.absDistY=0,c.dirX=0,c.dirY=0;if(c.options.momentum){c.options.useTransform?(f=getComputedStyle(c.scroller,null)[b+"Transform"].replace(/[^0-9-.,]/g,"").split(","),g=f[4]*1,h=f[5]*1):(g=getComputedStyle(c.scroller,null).left.replace(/[^0-9-]/g,"")*1,h=getComputedStyle(c.scroller,null).top.replace(/[^0-9-]/g,"")*1);if(g!=c.x||h!=c.y)c.options.useTransition?c._unbind("webkitTransitionEnd"):j(c.aniTime),c.steps=[],c._pos(g,h)}c.absStartX=c.x,c.absStartY=c.y,c.startX=c.x,c.startY=c.y,c.pointX=e.pageX,c.pointY=e.pageY,c.startTime=a.timeStamp||Date.now(),c.options.onScrollStart&&c.options.onScrollStart.call(c,a),c._bind(m),c._bind(n),c._bind(o)},_move:function(b){var c=this,e=d?b.touches[0]:b,f=e.pageX-c.pointX,g=e.pageY-c.pointY,h=c.x+f,i=c.y+g,j=b.timeStamp||Date.now();c.options.onBeforeScrollMove&&c.options.onBeforeScrollMove.call(c,b),c.pointX=e.pageX,c.pointY=e.pageY;if(h>0||h<c.maxScrollX)h=c.options.bounce?c.x+f/2:h<0&&c.maxScrollX<0?c.maxScrollX:0;if(i>0||i<c.maxScrollY)i=c.options.bounce?c.y+g/2:i<0&&c.maxScrollY<0?c.maxScrollY:0;if(c.absDistX<6&&c.absDistY<6){c.distX+=f,c.distY+=g,c.absDistX=a.abs(c.distX),c.absDistY=a.abs(c.distY);return}c.options.lockDirection&&(c.absDistX>c.absDistY+5?(i=c.y,g=0):c.absDistY>c.absDistX+5&&(h=c.x,f=0)),c.moved=!0,c._pos(h,i),c.dirX=f>0?-1:f<0?1:0,c.dirY=g>0?-1:g<0?1:0,j-c.startTime>300&&(c.startTime=j,c.startX=c.x,c.startY=c.y),c.options.onScrollMove&&c.options.onScrollMove.call(c,b)},_end:function(b){if(d&&b.touches.length!=0)return;var c=this,e=d?b.changedTouches[0]:b,f,g,h={dist:0,time:0},i={dist:0,time:0},j=(b.timeStamp||Date.now())-c.startTime,k=c.x,l=c.y,p;c._unbind(m),c._unbind(n),c._unbind(o),c.options.onBeforeScrollEnd&&c.options.onBeforeScrollEnd.call(c,b);if(!c.moved){if(d){f=e.target;while(f.nodeType!=1)f=f.parentNode;f.tagName!="SELECT"&&f.tagName!="INPUT"&&f.tagName!="TEXTAREA"&&(g=document.createEvent("MouseEvents"),g.initMouseEvent("click",!0,!0,b.view,1,e.screenX,e.screenY,e.clientX,e.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null),g._fake=!0,f.dispatchEvent(g))}c._resetPos(200),c.options.onTouchEnd&&c.options.onTouchEnd.call(c,b);return}if(j<300&&c.options.momentum){h=k?c._momentum(k-c.startX,j,-c.x,c.scrollerW-c.wrapperW+c.x,c.options.bounce?c.wrapperW:0):h,i=l?c._momentum(l-c.startY,j,-c.y,c.maxScrollY<0?c.scrollerH-c.wrapperH+c.y:0,c.options.bounce?c.wrapperH:0):i,k=c.x+h.dist,l=c.y+i.dist;if(c.x>0&&k>0||c.x<c.maxScrollX&&k<c.maxScrollX)h={dist:0,time:0};if(c.y>0&&l>0||c.y<c.maxScrollY&&l<c.maxScrollY)i={dist:0,time:0}}if(h.dist||i.dist){p=a.max(a.max(h.time,i.time),10),c.scrollTo(k,l,p),c.options.onTouchEnd&&c.options.onTouchEnd.call(c,b);return}c._resetPos(200),c.options.onTouchEnd&&c.options.onTouchEnd.call(c,b)},_resetPos:function(a){var b=this,c=b.x<0?b.x<b.maxScrollX?b.maxScrollX:b.x:0,d=b.y>=0||b.maxScrollY>0?0:b.y<b.maxScrollY?b.maxScrollY:b.y;if(c==b.x&&d==b.y){b.moved&&(b.options.onScrollEnd&&b.options.onScrollEnd.call(b),b.moved=!1);return}b.scrollTo(c,d,a||0)},_mouseout:function(a){var b=a.relatedTarget;if(!b){this._end(a);return}while(b=b.parentNode)if(b==this.wrapper)return;this._end(a)},_transitionEnd:function(a){var b=this;if(a.target!=b.scroller)return;b._unbind("webkitTransitionEnd"),b._startAni()},_startAni:function(){var b=this,c=b.x,d=b.y,e=Date.now(),f,g,h;if(b.animating)return;if(!b.steps.length){b._resetPos(400);return}f=b.steps.shift(),f.x==c&&f.y==d&&(f.time=0),b.animating=!0,b.moved=!0;if(b.options.useTransition){b._transitionTime(f.time),b._pos(f.x,f.y),b.animating=!1,f.time?b._bind("webkitTransitionEnd"):b._resetPos(0);return}h=function(){var j=Date.now(),k,l;if(j<e+f.time)j=(j-e)/f.time-1,g=a.sqrt(1-j*j),k=(f.x-c)*g+c,l=(f.y-d)*g+d,b._pos(k,l),b.animating&&(b.aniTime=i(h));else{b._pos(f.x,f.y),b.animating=!1,b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b),b._startAni();return}},h()},_transitionTime:function(a){this.scroller.style[b+"TransitionDuration"]=a+"ms"},_momentum:function(b,c,d,e,f){var g=6e-4,h=a.abs(b)/c,i=h*h/(2*g),j=0,k=0;return b>0&&i>d?(k=f/(6/(i/h*g)),d+=k,h=h*d/i,i=d):b<0&&i>e&&(k=f/(6/(i/h*g)),e+=k,h=h*e/i,i=e),i*=b<0?-1:1,j=h/g,{dist:i,time:a.round(j)}},_offset:function(a){var b=-a.offsetLeft,c=-a.offsetTop;while(a=a.offsetParent)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var a=this;a.scroller.style[b+"Transform"]="",a._unbind(k,window),a._unbind(l),a._unbind(m),a._unbind(n),a._unbind(o),a._unbind("mouseout",a.wrapper),a.options.useTransition&&a._unbind("webkitTransitionEnd"),a.options.onDestroy&&a.options.onDestroy.call(a)},refresh:function(){var a=this,c;a.wrapperW=a.wrapper.clientWidth,a.wrapperH=a.wrapper.clientHeight,a.scrollerW=a.scroller.offsetWidth,a.scrollerH=a.scroller.offsetHeight,a.maxScrollX=a.wrapperW-a.scrollerW,a.maxScrollY=a.wrapperH-a.scrollerH,a.dirX=0,a.dirY=0,a.hScroll=a.options.hScroll&&a.maxScrollX<0,a.vScroll=a.options.vScroll&&(!a.options.bounceLock&&!a.hScroll||a.scrollerH>a.wrapperH),c=a._offset(a.wrapper),a.wrapperOffsetLeft=-c.left,a.wrapperOffsetTop=-c.top,a.scroller.style[b+"TransitionDuration"]="0",a._resetPos(200)},scrollTo:function(a,b,c,d){var e=this,f=a,g,h;e.stop(),f.length||(f=[{x:a,y:b,time:c,relative:d}]);for(g=0,h=f.length;g<h;g++)f[g].relative&&(f[g].x=e.x-f[g].x,f[g].y=e.y-f[g].y),e.steps.push({x:f[g].x,y:f[g].y,time:f[g].time||0});e._startAni()},scrollToElement:function(b,c){var d=this,e;b=b.nodeType?b:d.scroller.querySelector(b);if(!b)return;e=d._offset(b),e.left+=d.wrapperOffsetLeft,e.top+=d.wrapperOffsetTop,e.left=e.left>0?0:e.left<d.maxScrollX?d.maxScrollX:e.left,e.top=e.top>0?0:e.top<d.maxScrollY?d.maxScrollY:e.top,c=c===undefined?a.max(a.abs(e.left)*2,a.abs(e.top)*2):c,d.scrollTo(e.left,e.top,c)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(m),this._unbind(n),this._unbind(o)},enable:function(){this.enabled=!0},stop:function(){j(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1}},typeof exports!="undefined"?exports.iScroll=r:window.iScroll=r})();var requirejs,require,define;(function(){function la(){var a,b,c;if(C&&C.readyState==="interactive")return C;a=document.getElementsByTagName("script");for(b=a.length-1;b>-1&&(c=a[b]);b--)if(c.readyState==="interactive")return C=c;return null}function ga(a){function b(a){a.prefix&&a.name&&a.name.indexOf("__$p")===0&&x[a.prefix]&&(a=p(a.originalName,a.parentMap));var b=a.prefix,e=a.fullName,f=r.urlFetched;!v[e]&&!y[e]&&(v[e]=!0,b?x[b]?c(b,a):(F[b]||(F[b]=[],(D[b]||(D[b]=[])).push({onDep:function(a){if(a===b){for(var d,e=F[b],a=0;a<e.length;a++)d=e[a],c(b,p(d.originalName,d.parentMap));delete F[b]}}})),F[b].push(a)):f[a.url]||(d.load(r,e,a.url),f[a.url]=!0))}function c(a,b){var c=b.name,e=b.fullName,f;e in x||e in y||(E[a]||(E[a]=x[a]),y[e]||(y[e]=!1),f=function(f){d.onPluginLoad&&d.onPluginLoad(r,a,c,f),j({prefix:b.prefix,name:b.name,fullName:b.fullName,callback:function(){return f}}),y[e]=!0},f.fromText=function(a,b){var c=N;r.loaded[a]=!1,r.scriptCount+=1,c&&(N=!1),d.exec(b),c&&(N=!0),r.completeLoad(a)},E[a].load(c,l(b.parentMap,!0),f,t))}function e(){var a=t.waitSeconds*1e3,b=a&&r.startTime+a<(new Date).getTime(),a="",c=!1,g=!1,h;if(r.pausedCount<=0){if(t.priorityWait)if(o())s();else return;for(h in y)if(!(h in J)&&(c=!0,!y[h]))if(b)a+=h+" ";else{g=!0;break}if(c||r.waitCount){if(b&&a)return h=R("timeout","Load timeout for modules: "+a),h.requireType="timeout",h.requireModules=a,d.onError(h);if(g||r.scriptCount)(B||ca)&&!X&&(X=setTimeout(function(){X=0,e()},50));else{if(r.waitCount){for(H=0;a=A[H];H++)f(a,{});Y<5&&(Y+=1,e())}Y=0,d.checkReadyState()}}}}function f(a,b){if(!a.isDone){var c=a.fullName,d=a.depArray,e,g;if(c){if(b[c])return x[c];b[c]=!0}for(g=0;g<d.length;g++)(e=d[g])&&!a.deps[e]&&z[e]&&a.onDep(e,f(z[e],b));return c?x[c]:void 0}}function g(a){h.apply(null,a),y[a[0]]=!0}function h(a,b,c,d){var a=p(a,d),e=a.name,f=a.fullName,g={},h={waitId:e||ja+C++,depCount:0,depMax:0,prefix:a.prefix,name:e,fullName:f,deps:{},depArray:b,callback:c,onDep:function(a,b){a in h.deps||(h.deps[a]=b,h.depCount+=1,h.depCount===h.depMax&&j(h))}},i,m;if(f){if(f in x||y[f]===!0||f==="jquery"&&t.jQuery&&t.jQuery!==c().fn.jquery)return;v[f]=!0,y[f]=!0,f==="jquery"&&c&&T(c())}for(c=0;c<b.length;c++)if(i=b[c])i=p(i,e?a:d),m=i.fullName,b[c]=m,m==="require"?h.deps[m]=l(a):m==="exports"?(h.deps[m]=x[f]={},h.usingExports=!0):m==="module"?(h.cjsModule=i=h.deps[m]={id:e,uri:e?r.nameToUrl(e,null,d):void 0,exports:x[f]},i.setExports=n(i)):m in x&&!(m in z)?h.deps[m]=x[m]:g[m]||(h.depMax+=1,k(i),(D[m]||(D[m]=[])).push(h),g[m]=!0);h.depCount===h.depMax?j(h):(z[h.waitId]=h,A.push(h),r.waitCount+=1)}function j(a){var b,c,e;b=a.callback;var f=a.fullName,g=[],h=a.depArray;if(b&&M(b)){if(h)for(b=0;b<h.length;b++)g.push(a.deps[h[b]]);if(t.catchError.define)try{c=d.execCb(f,a.callback,g,x[f])}catch(i){e=i}else c=d.execCb(f,a.callback,g,x[f]);f&&(a.cjsModule&&a.cjsModule.exports!==void 0?c=x[f]=a.cjsModule.exports:c===void 0&&a.usingExports?c=x[f]:x[f]=c)}else f&&(c=x[f]=b);z[a.waitId]&&(delete z[a.waitId],a.isDone=!0,r.waitCount-=1,r.waitCount===0&&(A=[]));if(e)return c=(f?p(f).url:"")||e.fileName||e.sourceURL,e=R("defineerror",'Error evaluating module "'+f+'" at location "'+c+'":\n'+e+"\nfileName:"+c+"\nlineNumber: "+(e.lineNumber||e.line),e),e.moduleName=f,d.onError(e);if(f&&(e=D[f])){for(b=0;b<e.length;b++)e[b].onDep(f,c);delete D[f]}}function k(a){var b=a.prefix,c=a.fullName;v[c]||c in x||(b&&!E[b]&&(E[b]=void 0,(I[b]||(I[b]=[])).push(a),(D[b]||(D[b]=[])).push({onDep:function(a){if(a===b){var c,d,e,f,g,h,i=I[b];if(i)for(e=0;c=i[e];e++)if(a=c.fullName,c=p(c.originalName,c.parentMap),c=c.fullName,d=D[a]||[],f=D[c],c!==a){a in v&&(delete v[a],v[c]=!0),D[c]=f?f.concat(d):d,delete D[a];for(f=0;f<d.length;f++){h=d[f].depArray;for(g=0;g<h.length;g++)h[g]===a&&(h[g]=c)}}delete I[b]}}}),k(p(b))),r.paused.push(a))}function l(a,b){var c=m(r.require,a,b);return V(c,{nameToUrl:m(r.nameToUrl,a),toUrl:m(r.toUrl,a),defined:m(r.requireDefined,a),specified:m(r.requireSpecified,a),ready:d.ready,isBrowser:d.isBrowser}),d.paths&&(c.paths=d.paths),c}function m(a,b,c){return function(){var d=[].concat(ia.call(arguments,0)),e;return c&&M(e=d[d.length-1])&&(e.__requireJsBuild=!0),d.push(b),a.apply(null,d)}}function n(a){return function(b){a.exports=b}}function o(){var a=!0,b=t.priorityWait,c,d;if(b){for(d=0;c=b[d];d++)if(!y[c]){a=!1;break}a&&delete t.priorityWait}return a}function p(a,b){var c=a?a.indexOf("!"):-1,e=null,f=b?b.name:null,g=a,h,i;return c!==-1&&(e=a.substring(0,c),a=a.substring(c+1,a.length)),e&&(e=q(e,f)),a&&(h=e?(c=x[e])?c.normalize?c.normalize(a,function(a){return q(a,f)}):q(a,f):"__$p"+f+"@"+(a||""):q(a,f),i=w[h],i||(i=d.toModuleUrl?d.toModuleUrl(r,h,b):r.nameToUrl(h,null,b),w[h]=i)),{prefix:e,name:h,parentMap:b,url:i,originalName:g,fullName:e?e+"!"+(h||""):h}}function q(a,b){var c,d;if(a&&a.charAt(0)==="."&&b){t.pkgs[b]?b=[b]:(b=b.split("/"),b=b.slice(0,b.length-1)),c=a=b.concat(a.split("/"));var e;for(d=0;e=c[d];d++)if(e===".")c.splice(d,1),d-=1;else if(e==="..")if(d!==1||c[2]!==".."&&c[0]!=="..")d>0&&(c.splice(d-1,2),d-=2);else break;d=t.pkgs[c=a[0]],a=a.join("/"),d&&a===c+"/"+d.main&&(a=c)}return a}var r,s,t={waitSeconds:7,baseUrl:i.baseUrl||"./",paths:{},pkgs:{},catchError:{}},u=[],v={require:!0,exports:!0,module:!0},w={},x={},y={},z={},A=[],C=0,D={},E={},F={},G=0,I={};return T=function(a){!r.jQuery&&(a=a||(typeof jQuery!="undefined"?jQuery:null))&&(!t.jQuery||a.fn.jquery===t.jQuery)&&("holdReady"in a||"readyWait"in a)&&(r.jQuery=a,g(["jquery",[],function(){return jQuery}]),r.scriptCount)&&(W(a,!0),r.jQueryIncremented=!0)},s=function(){var a,c,f;G+=1,r.scriptCount<=0&&(r.scriptCount=0);for(;u.length;){if(a=u.shift(),a[0]===null)return d.onError(R("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));g(a)}if(!t.priorityWait||o())for(;r.paused.length;){f=r.paused,r.pausedCount+=f.length,r.paused=[];for(c=0;a=f[c];c++)b(a);r.startTime=(new Date).getTime(),r.pausedCount-=f.length}G===1&&e(),G-=1},r={contextName:a,config:t,defQueue:u,waiting:z,waitCount:0,specified:v,loaded:y,urlMap:w,scriptCount:0,urlFetched:{},defined:x,paused:[],pausedCount:0,plugins:E,managerCallbacks:D,makeModuleMap:p,normalize:q,configure:function(a){var b,c,e;a.baseUrl&&a.baseUrl.charAt(a.baseUrl.length-1)!=="/"&&(a.baseUrl+="/"),b=t.paths,e=t.pkgs,V(t,a,!0);if(a.paths){for(c in a.paths)c in J||(b[c]=a.paths[c]);t.paths=b}if((b=a.packagePaths)||a.packages){if(b)for(c in b)c in J||aa(e,b[c],c);a.packages&&aa(e,a.packages),t.pkgs=e}a.priority&&(c=r.requireWait,r.requireWait=!1,r.takeGlobalQueue(),s(),r.require(a.priority),s(),r.requireWait=c,t.priorityWait=a.priority),(a.deps||a.callback)&&r.require(a.deps||[],a.callback),a.ready&&d.ready(a.ready)},requireDefined:function(a,b){return p(a,b).fullName in x},requireSpecified:function(a,b){return p(a,b).fullName in v},require:function(b,c,e){if(typeof b=="string")return d.get?d.get(r,b,c):(c=p(b,c),b=c.fullName,b in x?x[b]:d.onError(R("notloaded","Module name '"+c.fullName+"' has not been loaded yet for context: "+a)));h(null,b,c,e);if(!r.requireWait)for(;!r.scriptCount&&r.paused.length;)r.takeGlobalQueue(),s();return r.require},takeGlobalQueue:function(){U.length&&(ka.apply(r.defQueue,[r.defQueue.length-1,0].concat(U)),U=[])},completeLoad:function(a){var b;for(r.takeGlobalQueue();u.length;){if(b=u.shift(),b[0]===null){b[0]=a;break}if(b[0]===a)break;g(b),b=null}b?g(b):g([a,[],a==="jquery"&&typeof jQuery!="undefined"?function(){return jQuery}:null]),y[a]=!0,T(),d.isAsync&&(r.scriptCount-=1),s(),d.isAsync||(r.scriptCount-=1)},toUrl:function(a,b){var c=a.lastIndexOf("."),d=null;return c!==-1&&(d=a.substring(c,a.length),a=a.substring(0,c)),r.nameToUrl(a,d,b)},nameToUrl:function(a,b,c){var e,f,g,h,i=r.config,a=q(a,c&&c.fullName);if(d.jsExtRegExp.test(a))b=a+(b?b:"");else{e=i.paths,f=i.pkgs,c=a.split("/");for(h=c.length;h>0;h--){if(g=c.slice(0,h).join("/"),e[g]){c.splice(0,h,e[g]);break}if(g=f[g]){a=a===g.name?g.location+"/"+g.main:g.location,c.splice(0,h,a);break}}b=c.join("/")+(b||".js"),b=(b.charAt(0)==="/"||b.match(/^\w+:/)?"":i.baseUrl)+b}return i.urlArgs?b+((b.indexOf("?")===-1?"?":"&")+i.urlArgs):b}},r.jQueryCheck=T,r.resume=s,r}function W(a,b){a.holdReady?a.holdReady(b):b?a.readyWait+=1:a.ready(!0)}function aa(a,b,c){var d,e,f;for(d=0;f=b[d];d++)f=typeof f=="string"?{name:f}:f,e=f.location,c&&(!e||e.indexOf("/")!==0&&e.indexOf(":")===-1)&&(e=c+"/"+(e||f.name)),a[f.name]={name:f.name,location:e||f.name,main:(f.main||"main").replace(fa,"").replace(ba,"")}}function R(a,b,c){return a=Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a),c&&(a.originalError=c),a}function V(a,b,c){for(var e in b)!(e in J)&&(!(e in a)||c)&&(a[e]=b[e]);return d}function E(a){return $.call(a)==="[object Array]"}function M(a){return $.call(a)==="[object Function]"}var ma=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,na=/require\(\s*["']([^'"\s]+)["']\s*\)/g,fa=/^\.\//,ba=/\.js$/,$=Object.prototype.toString,q=Array.prototype,ia=q.slice,ka=q.splice,B=typeof window!="undefined"&&!!navigator&&!!document,ca=!B&&typeof importScripts!="undefined",oa=B&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,da=typeof opera!="undefined"&&opera.toString()==="[object Opera]",ja="_r@@",J={},z={},U=[],C=null,Y=0,N=!1,d,q={},I,i,u,L,v,A,D,H,Q,ea,w,T,X;if(typeof define=="undefined"){if(typeof requirejs!="undefined"){if(M(requirejs))return;q=requirejs,requirejs=void 0}typeof require!="undefined"&&!M(require)&&(q=require,require=void 0),d=requirejs=function(a,b,c){var d="_",e;return!E(a)&&typeof a!="string"&&(e=a,E(b)?(a=b,b=c):a=[]),e&&e.context&&(d=e.context),c=z[d]||(z[d]=ga(d)),e&&c.configure(e),c.require(a,b)},d.config=function(a){return d(a)},typeof require=="undefined"&&(require=d),d.toUrl=function(a){return z._.toUrl(a)},d.version="0.26.0",d.isArray=E,d.isFunction=M,d.mixin=V,d.jsExtRegExp=/^\/|:|\?|\.js$/,i=d.s={contexts:z,skipAsync:{},isPageLoaded:!B,readyCalls:[]};if(d.isAsync=d.isBrowser=B)if(u=i.head=document.getElementsByTagName("head")[0],L=document.getElementsByTagName("base")[0])u=i.head=L.parentNode;d.onError=function(a){throw a},d.load=function(a,b,c){var e=a.loaded;e[b]||(e[b]=!1),a.scriptCount+=1,d.attach(c,a,b),a.jQuery&&!a.jQueryIncremented&&(W(a.jQuery,!0),a.jQueryIncremented=!0)},define=d.def=function(a,b,c){var e,f;typeof a!="string"&&(c=b,b=a,a=null),d.isArray(b)||(c=b,b=[]),!a&&!b.length&&d.isFunction(c)&&c.length&&(c.toString().replace(ma,"").replace(na,function(a,c){b.push(c)}),b=(c.length===1?["require"]:["require","exports","module"]).concat(b)),N&&(e=I||la())&&(a||(a=e.getAttribute("data-requiremodule")),f=z[e.getAttribute("data-requirecontext")]),(f?f.defQueue:U).push([a,b,c])},define.amd={multiversion:!0,plugins:!0,jQuery:!0},d.exec=function(a){return eval(a)},d.execCb=function(a,b,c,d){return b.apply(d,c)},d.onScriptLoad=function(a){var b=a.currentTarget||a.srcElement,c;if(a.type==="load"||oa.test(b.readyState))C=null,a=b.getAttribute("data-requirecontext"),c=b.getAttribute("data-requiremodule"),z[a].completeLoad(c),b.detachEvent&&!da?b.detachEvent("onreadystatechange",d.onScriptLoad):b.removeEventListener("load",d.onScriptLoad,!1)},d.attach=function(a,b,c,e,f){var g;return B?(e=e||d.onScriptLoad,g=b&&b.config&&b.config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),g.type=f||"text/javascript",g.charset="utf-8",g.async=!i.skipAsync[a],b&&g.setAttribute("data-requirecontext",b.contextName),g.setAttribute("data-requiremodule",c),g.attachEvent&&!da?(N=!0,g.attachEvent("onreadystatechange",e)):g.addEventListener("load",e,!1),g.src=a,I=g,L?u.insertBefore(g,L):u.appendChild(g),I=null,g):(ca&&(e=b.loaded,e[c]=!1,importScripts(a),b.completeLoad(c)),null)};if(B){v=document.getElementsByTagName("script");for(H=v.length-1;H>-1&&(A=v[H]);H--){u||(u=A.parentNode);if(D=A.getAttribute("data-main")){q.baseUrl||(v=D.split("/"),A=v.pop(),v=v.length?v.join("/")+"/":"./",q.baseUrl=v,D=A.replace(ba,"")),q.deps=q.deps?q.deps.concat(D):[D];break}}}i.baseUrl=q.baseUrl,d.pageLoaded=function(){i.isPageLoaded||(i.isPageLoaded=!0,Q&&clearInterval(Q),ea&&(document.readyState="complete"),d.callReady())},d.checkReadyState=function(){var a=i.contexts,b;for(b in a)if(!(b in J)&&a[b].waitCount)return;i.isDone=!0,d.callReady()},d.callReady=function(){var a=i.readyCalls,b,c,d;if(i.isPageLoaded&&i.isDone){if(a.length){i.readyCalls=[];for(b=0;c=a[b];b++)c()}a=i.contexts;for(d in a)!(d in J)&&(b=a[d],b.jQueryIncremented)&&(W(b.jQuery,!1),b.jQueryIncremented=!1)}},d.ready=function(a){return i.isPageLoaded&&i.isDone?a():i.readyCalls.push(a),d};if(B){if(document.addEventListener){if(document.addEventListener("DOMContentLoaded",d.pageLoaded,!1),window.addEventListener("load",d.pageLoaded,!1),!document.readyState)ea=!0,document.readyState="loading"}else window.attachEvent&&(window.attachEvent("onload",d.pageLoaded),self===self.top&&(Q=setInterval(function(){try{document.body&&(document.documentElement.doScroll("left"),d.pageLoaded())}catch(a){}},30)));document.readyState==="complete"&&d.pageLoaded()}d(q),d.isAsync&&typeof setTimeout!="undefined"&&(w=i.contexts[q.context||"_"],w.requireWait=!0,setTimeout(function(){w.requireWait=!1,w.takeGlobalQueue(),w.jQueryCheck(),w.scriptCount||w.resume(),d.checkReadyState()},0))}})(),define("requireLib",function(){}),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=Array.prototype.slice;a=typeof (typeof console!="undefined"&&console!==null?console.error:void 0)=="function"&&function(a){return console.error(a)}||function(){},f=this,c=f.document||{createElement:function(){}},l=typeof Node=="object"?function(a){return a instanceof Node}:function(a){return typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.nodeName=="string"},q=Array.prototype.slice,g=(e=Function.prototype.bind)?function(a,b){return e.apply(a,[b].concat(q.call(arguments,2)))}:function(a,b){var c;return c=q.call(arguments,2),function(){return a.apply(b,c.concat(q.call(arguments)))}},j=function(a,b){var c;for(c in b)a[c]=b[c];return a},h=function(){},k=function(a,b){var c;return c=b&&b.hasOwnProperty("constructor")?b.constructor:function(){return a.apply(this,arguments)},j(c,a),h.prototype=a.prototype,c.prototype=new h,j(c.prototype,b),c.prototype.constructor=c,c.__super__=a.prototype,c},s=c.createElement("div"),n=function(b,d){var e,f;while(d.length>0)(e=d.shift())!=null&&(l(e)?b.appendChild(e):(f=typeof e)==="string"||f==="number"?b.appendChild(c.createTextNode(e)):e instanceof Array?Array.prototype.unshift.apply(d,e):a("renderNodes: unsupported child type = "+e));return b},p=/^(\w+)?(#([\w\-]+))*(\.[\w\.\-]+)?$/,r=/^<[A-z]/,i=/^([A-z]+)(\s(.*))?$/,o=function(b,d){var e,f,g,h,i;if(typeof b=="string"){if(g=p.exec(b)){e=c.createElement(g[1]||"div");if(h=g[3])e.id=h;if(d){"class"in d&&(e.className+=d["class"],delete d["class"]);for(f in d)h=d[f],e.setAttribute(f,h)}if(h=g[4])e.className+=h.replace(/\./g," ");return e}return r.test(b)?(s.innerHTML=b,s.children[0]):a("renderParent: unsupported parent string = '"+b+"'")}return((i=b.prototype)!=null?i.cell:void 0)===b?(new b(d)).el:l(b)?b:a("renderParent: unsupported parent type = "+b)},f.cell=b=function(a){var b,c,d,e,f,h,i;this.options=a!=null?a:{},this.options.model!=null&&(this.model=this.options.model),typeof this.init=="function"&&this.init(this.options),s.innerHTML=(e=typeof this.tag)==="string"?this.tag:e==="function"?this.tag():"<div>",this.$el=$(this.el=s.children[0]);if(b=this.options.id)this.el.id=b;i=[this.cell.prototype.name,this["class"],this.options["class"]];for(f=0,h=i.length;f<h;f++)c=i[f],c&&(this.el.className+=" "+c);this.render?(d=this.render(this.$R,g(this._renderChildren,this)))instanceof Array&&this._renderChildren(d):this._renderChildren([])},b.prototype={$R:function(){var a,b,c,d;a=arguments[0],b=arguments[1],c=3>arguments.length?[]:t.call(arguments,2);if(a){(b!=null?b.constructor:void 0)!==Object&&(c.unshift(b),b=void 0);if(d=o(a,b))return n(d,c)}},$:function(a){return $(a,this.el)},ready:function(a){var b;if(!this._isReady)return((b=this._readys)!=null?b:this._readys=[]).push(a);try{return a(this)}catch(c){}},_renderChildren:function(a){var b,c,d,e;n(this.el,a),this._delegateEvents(),typeof this.afterRender=="function"&&this.afterRender(),this._isReady=!0;if(this._readys){e=this._readys;for(c=0,d=e.length;c<d;c++){b=e[c];try{b(this)}catch(f){}}delete this._readys}},_delegateEvents:function(){var a,b,c,d,e,f;f=this.on;for(a in f){c=f[a];if(typeof c=="function"&&(d=i.exec(a))){c=g(c,this);if(b=d[1])(e=d[3])?this.$el.delegate(e,b,c):this.$el.bind(b,c)}}}},b.extend=function(a,d){var e,f,g,h;return typeof d=="string"&&(a.name=d),e=k(this,a),e.extend=b.extend,e.prototype.cell=e,typeof (f=a.css)=="string"?(h=c.createElement("style"),h.innerHTML=f):typeof (g=a.css_href)=="string"&&(h=c.createElement("link"),h.href=g,h.rel="stylesheet"),h&&(h.type="text/css",$("head")[0].appendChild(h)),e},typeof define=="function"&&typeof require=="function"&&(m=/(.*\/)?(.*)/,define("cell",[],d={pluginBuilder:"cell-pluginBuilder",load:function(c,e,f,g){e([c],function(g){var h,i,j;typeof g!="object"?a("Couldn't load "+c+" cell. cell definitions should be objects, but instead was "+typeof g):(h=m.exec(c).slice(1),typeof ((i=d.__preinstalledCells__)!=null?i[c]:void 0)=="undefined"&&(j=g.css_href)==null&&(g.css_href=e.toUrl(""+c+".css")),typeof g["extends"]=="string"?e(["cell!"+g["extends"]],function(a){a.prototype.name&&(g["class"]=a.prototype.name+(" "+g["class"])||""),f(a.extend(g,h[1]))}):f(b.extend(g,h[1])))})}}),require.ready(function(){$("[data-cell]").each(function(){var a,b,c,d,e,g;e=this;if(d=e.getAttribute("data-cell")){g={},b=/(^\?cachebust)|(&cachebust)/.test(f.location.search),((c=e.getAttribute("data-cell-cachebust"))!==null||b)&&c!=="false"&&(g.urlArgs="bust="+(new Date).getTime());if(a=e.getAttribute("data-cell-baseurl"))g.baseUrl=a;require(g,["cell!"+d],function(a){$(e).append((new a).el)})}})}))}.call(this);var __slice=Array.prototype.slice,__bind=function(a,b){return function(){return a.apply(b,arguments)}};define("data/JSONP",[],function(){var a,b,c,d;return b=function(a){return a},d=0,c=function(a){var b,c,e;return b="__jsonp"+ ++d,window[b]=function(c){return a.success(c),window[b]=void 0,$("#"+b).remove()},(e=a.callback)==null&&(a.callback="callback"),c=document.createElement("script"),c.id=b,c.setAttribute("type","text/javascript"),c.setAttribute("src",""+a.url+(a.url.indexOf("?")===-1&&"?"||"&")+a.callback+"="+b),$("head").append(c)},a=window.location.search.indexOf("mock-service=true")>-1?function(a,b){var c,d;return c=a.mock,d=a.real,setTimeout(function(){return require([c],function(a){return b(function(){return typeof a=="function"?a(d):a}())})},0)}:function(a,b){var d;return d=a.real,c({callback:"jsonp",url:d,success:b||function(){}})},{JSONPService:function(){function c(c,d){var e,f,g,h,i,j;e=d.baseURL,i=d.process,f=d.methods,i==null&&(i=b),j=__bind(function(d,f){var g,h,j;return h=i,g=b,(j=typeof f)==="object"&&j!=="function"&&(f.process!=null&&(h=f.process),f=f.path,f.getCache!=null&&(g=f.getCache)),typeof f=="string"&&function(){var a;return a=f,f=function(){return a}}(),this[d]=__bind(function(){var i,j,k,l;i=2>arguments.length?(l=0,[]):__slice.call(arguments,0,l=arguments.length-1),k=arguments[l++],k==null&&(k=b),(j=g())!==void 0?k(j):a({mock:"data/mock/"+c+"/"+d,real:e+f.apply(null,i)},function(a){a=h(a),k(a)})},this)},this);for(g in f)h=f[g],j(g,h);return}return c}()}}),define("data/UserService",["data/JSONP"],function(a){var b,c;return b=a.JSONPService,c="pwong",new b("users",{baseURL:"api/users/",methods:{getWatchedShows:function(){return""+c+"/watched-shows"},getShows:function(a){return""+c+"/schedule/"+(a.getYear()+1900)+"-"+a.getMonth()+"-"+a.getDate()}}})}),define("data/ActorService",["data/JSONP"],function(a){var b;return b=a.JSONPService,new b("actors",{baseURL:"api/actors/",methods:{getDetails:function(a){return""+a}}})}),define("data/ShowService",["data/JSONP"],function(a){var b;return b=a.JSONPService,new b("shows",{baseURL:"api/shows/",methods:{getDetails:function(a){return""+a}}})}),define("Services",["data/UserService","data/ActorService","data/ShowService"],function(a,b,c){return{user:a,show:c,actor:b}}),define("shared/DateHelper",[],function(){var a,b,c;return c=new Date,b=["Today","Yesterday"].concat(function(){var b;b=[];for(a=2;a<7;a++)b.push(""+a+" days ago");return b}(),"a week ago"),{getDisplayable:function(a){return c.getYear()===a.getYear()&&c.getMonth()===a.getMonth()?b[c.getDate()-a.getDate()]:a.toLocaleDateString()}}}),define("shared/ListView",{tag:"<ul>",render:function(a,b){var c,d,e,f,g,h,i,j;if(e=this.options.list){j=[];for(g=0,h=e.length;g<h;g++)i=e[g],f=i.text,d=i.link,c=i.dividerText,(f||c)&&j.push(f?a("<li data-navto='"+d+"'>",a("div"),f):a("li.divider",c));return j}},on:{resetActive:function(){return this.$("li.active").removeClass("active").addClass("deactive")},"webkitAnimationEnd li > div":function(){return this.$("li.deactive").removeClass("deactive")},"click li":function(a){var b;return b=a.target,this.$("li.active").removeClass("active"),$(b).closest("li").addClass("active")}}});var __bind=function(a,b){return function(){return a.apply(b,arguments)}};define("pages/schedule/Schedule",["require","Services","shared/DateHelper","cell!shared/ListView"],function(a,b,c,d){var e;return e="pages/showdetails/ShowDetails",{init:function(){return a([e],function(){}),this.model.set({title:c.getDisplayable(new Date)}),this.model.bind({activate:__bind(function(){return this.$("#ShowList").trigger("resetActive")},this)})},render:function(a,c){return b.user.getShows(new Date,__bind(function(b){var f;return c([a(d,{id:"ShowList",list:function(){var a,c,d;d=[];for(a=0,c=b.length;a<c;a++)f=b[a],d.push(function(){return{link:""+e+"?id="+f.id+"&title="+f.title,text:f.title}}());return d}()})]),this.model.trigger("refreshScroller")},this))}}}),define("AppConfig",["cell!pages/schedule/Schedule"],function(){return{contexts:{Schedule:{defaultPagePath:"pages/schedule/Schedule"},Watch:{defaultPagePath:"pages/watch/Watch"},Search:{defaultPagePath:"pages/watch/Watch"}},defaultContext:"Schedule"}}),define("HashDelegate",{set:function(a){return window.location.hash=a},get:function(){return window.location.hash},onChange:function(a){return $(window).bind("hashchange",a)}}),define("framework/Model",[],function(){var a,b,c;return b=/^change:(.*)/,c=function(a,b){var c,d,e;for(d=0,e=a.length;d<e;d++){c=a[d];if(c===b)return}return a.unshift(b)},a=function(){function a(a){var b,c;this._ls={};for(b in a)c=a[b],this[b]=c;return}var d,e;return a.pathObj=e=function(a,b){if(a){for(var c=0,d=b.length;c<d&&(a=a[b[c]])!=null;c++);return a}},a.parsePropChange=d=function(a){var c,d;return(c=b.exec(a))!=null?(d=c[1])!=null?d.split("."):void 0:void 0},a.prototype.set=function(a,b){var c,d,e;for(c in a){e=a[c];if(this[c]!==e){d=this[c];try{this.trigger({cur:this[c]=e,prev:d,property:c,type:"change:"+c,data:b})}catch(f){}}}},a.prototype.trigger=function(a,b){var c,d,e,f,g;c=typeof a=="string"?{type:a,data:b}:a,c.model=this;if(e=this._ls[c.type])for(f=0,g=e.length;f<g;f++){d=e[f];try{d(c)}catch(h){}}},a.prototype.bindAndCall=function(b){var f,g,h,i;g=this,i=function(b){var f,i,j,k,l,m,n,o,p,q,r,s,t;if(m=d(h)){i=m.length-1,p=m[i],l=m.slice(0,i),n=function(a,b){var d,e,f;return c((f=(d=b._ls)[e="change:"+m[a]])!=null?f:d[e]=[],o[a])},j=g,o=[],r=function(c){o[
c]=function(d){for(var e=c,f=d.cur,g=d.prev,h=d.model;e++<i;f=(h=f)&&f[m[e]],g=g&&g[m[e]])f instanceof a&&n(e,f);var j;return j={cur:f,prev:g,property:p,type:"change:"+p,model:h,data:d.data},c!==i&&(j.parentEvent=d),b(j)};if(j instanceof a)return n(c,j),j=j[k]};for(f=0,s=m.length;f<s;f++)k=m[f],r(f);try{return b({cur:j,property:p,type:h,model:e(g,l)})}catch(u){return console.error((u!=null?u.stack:void 0)||u)}}else{c((t=(q=g._ls)[h])!=null?t:q[h]=[],b);try{return b({type:h,model:g})}catch(v){}}};for(h in b)f=b[h],i(f)},a.prototype.bind=function(b){var e,f,g,h,i,j,k,l,m,n,o,p;for(j in b){f=b[j];if(i=d(j)){g=this,o=i.slice(0,-1);for(m=0,n=o.length;m<n;m++)h=o[m],(k=g[h])instanceof a&&(e={},e["change:"+h]=function(a){var b,c;b=a.cur,c=a.prev},k.bind(e))}c((p=(l=this._ls)[j])!=null?p:l[j]=[],f)}},a.prototype.unbind=function(a){var b,c,d,e,f,g,h;h=[];for(f in a){b=a[f];if(e=this._ls[f])for(c=0,g=e.length;c<g;c++){d=e[c];if(d===b){delete e[c];return}}}return h},a}()}),define("framework/Nav",["AppConfig","HashDelegate","./Model"],function(a,b,c){var d,e,f,g,h,i,j;g=/^\#([^!^?]+)(!([^?]+))?(\?(.+))?/,j=void 0,d=new c({toHash:i=function(b){var c,d,e,f,g,h,i,j;c=b.context,h=b.page,e=b.data,d=a.contexts[c]&&c||a.defaultContext,f="#"+d+"!"+(h||a.contexts[d].defaultPagePath);if(e){i="?";for(g in e)j=e[g],f+=""+i+g+"="+encodeURIComponent(j),i="&"}return f},parseHash:h=function(b){var c,d,e,f;return f=g.exec(b),{hash:b,context:c=(d=f!=null?f[1]:void 0)&&a.contexts[d]?d:a.defaultContext,page:(e=f!=null?f[3]:void 0)&&e.substr(-1)!=="/"?e:a.contexts[c].defaultPagePath,data:function(){var a,b,c,d,e,g,h,i,j;a={};if(b=f!=null?f[5]:void 0){i=b.split("&");for(g=0,h=i.length;g<h;g++)d=i[g],j=d.split("="),c=j[0],e=j[1],a[c]=decodeURIComponent(e);a}return a}()}},current:new c(h(b.get())),canBack:function(){var a;return((a=e[d.current.context])!=null?a.length:void 0)>1},goBack:function(){var a;a=e[d.current.context];if(a.length>1)return j=a[1],b.set(j.hash)},goTo:function(a){return b.set(""+d.current.context+"!"+a)},switchContext:function(c){var f;if(typeof c=="string"&&(f=e[c])&&d.current.context!==c)return b.set(i(f[0]||{context:c,page:a.contexts[c].defaultPage}))}}),window.ctxHists=e={};for(f in a.contexts)e[f]=[];return e[d.current.context].push(d.current),d.bind({"change:current":function(a){var b,c,e;b={};for(c in a)e=a[c],b[c]=e;return b.type="change:current[context="+a.cur.context+"]",d.trigger(b)}}),b.onChange(function(){var a,f,g,h,i;f=new c(d.parseHash(b.get())),a=e[f.context];if(d.current.context!==f.context)return j=void 0,d.set({current:f},{isBack:!1,isContextSwitch:!0});if(j){g=0;while(a[g].hash!==j.hash)++g;return f=j,j=void 0,a.splice(0,g),d.set({current:f},{isBack:!0,isContextSwitch:!1})}if(f.hash===((h=a[1])!=null?h.hash:void 0))return j=void 0,a.splice(0,1),d.set({current:f},{isBack:!0,isContextSwitch:!1});if(a.length<1||((i=a[0])!=null?i.hash:void 0)!==f.hash)return j=void 0,a.unshift(f),d.set({current:f},{isBack:!1,isContextSwitch:!1})}),d});var __hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__bind=function(a,b){return function(){return a.apply(b,arguments)}};define("framework/ContextModel",["./Model"],function(a){var b;return b=function(){function b(c){var d,e,f,g,h,i,j;h=c.id,i=c.initialHash,g=c.hashManager,f=c.defaultPagePath,b.__super__.constructor.call(this,{id:h,defaultPagePath:f,currentPageModel:e=new a(i),pageHistory:j=[e]}),(d={})["change:current[context="+h+"]"]=__bind(function(b){var c,d,e,f;return c=b.cur,e=b.prev,(d=c.context!==(e!=null?e.context:void 0))||(((f=j[1])!=null?f.hash:void 0)===c.hash?j.splice(0,1):j.unshift(new a(c))),this.set({currentPageModel:j[0]},{isContextSwitch:d})},this),g.bind(d)}return __extends(b,a),b}()}),require(["cell"],function(a){a.__preinstalledCells__={"framework/App":0,"pages/schedule/Schedule":0,"shared/ListView":0,"framework/Context":0,"framework/ContextNavBar":0,"framework/TitleBar":0,"framework/Page":0}});var __bind=function(a,b){return function(){return a.apply(b,arguments)}};define("framework/Page",["require","./Nav"],function(a,b){return{tag:function(){return"<div data-cellpath='"+this.model.page+"'>"},render:function(b,c){return a(["cell!"+this.model.page],__bind(function(a){return c([b(a,{model:this.model})])},this))},afterRender:function(){var a,b;return a=!0,this.model.bind({deactivate:__bind(function(){return a=!1},this)}),this.model.bind({activate:__bind(function(){return a=!0,this.$el.css("visibility","visible")},this)}),this.$el.bind("webkitAnimationEnd",__bind(function(){if(!a)return this.$el.css("visibility","hidden")},this)),b=new iScroll(this.el),this.model.bindAndCall({refreshScroller:function(){return b.refresh()}})},on:{"click *[data-navto]":function(a){var c;return c=a.target,b.goTo($(c).closest("[data-navto]").data("navto"))}}}}),define("framework/Context",["require","./Model","./Nav","cell!./Page"],function(a,b,c,d){return{tag:function(){return"<div data-ctxid='"+this.options.contextid+"'>"},afterRender:function(){var a,e,f,g,h;return h={},f=null,a=this.$el,e={},g=e["change:current[context="+this.options.contextid+"]"]=function(c){var e,g,i,j,k,l,m;return e=c.cur,k=c.prev,g=c.data.isBack,i=h[e.hash],l=k&&h[k.hash],l&&(delete h[k.hash],l.$el.bind("webkitAnimationEnd",function(){return l.$el.remove()})),i||(i=h[e.hash]=new d({model:new b(e)})),i.$el.prependTo(a),j="Page",j+=" animate "+((k!=null?k.context:void 0)===e.context?(m=g&&"-reverse"||"",f!=null?f.$el.attr("class","Page animate headingOut"+m):void 0,f!=null?f.model.trigger("deactivate"):void 0,"headingIn"+m):"fadeIn"),i.$el.attr("class",j),(f=i).model.trigger({type:"activate",isback:g})},c.bind(e),g({cur:this.options.initialHash,data:{isBack:!1}})}}}),define("framework/ContextNavBar",["AppConfig","./Nav"],function(a,b){return{tag:"<ul>",render:function(b,c){var d,e;return[function(){var c,f;c=a.contexts,f=[];for(d in c)e=c[d].text,f.push(b("<li data-ctxid='"+d+"'>",e||d));return f}()]},on:{"click li":function(a){var c;return c=a.target,$("li.active").removeClass("active"),b.switchContext($(c).addClass("active").data("ctxid"))}}}});var __bind=function(a,b){return function(){return a.apply(b,arguments)}};define("framework/TitleBar",["framework/Nav"],function(a){return{render:function(a,b){return[a("#backbutton",a("span","Back")),a("#titles",a("#title"),a("#prevtitle")),a("#gobutton",a("span","Do It"))]},afterRender:function(){var b,c,d,e,f,g;return f=!1,b=this.$("#backbutton"),c=this.$("#backbutton > span"),e=this.$("#title"),d=this.$("#prevtitle"),g={},e.bind("webkitAnimationEnd",function(){return e.attr("class",""),d.attr("class",""),f=!1}),a.bindAndCall({"change:current.title":__bind(function(c){var g,h,i,j,k,l;g=c.cur,j=c.prev,h=c.data,i=h!=null?h.isBack:void 0,k=j,e.html(g||"");if(!f)return b.css("visibility",a.canBack()&&"visible"||"hidden"),l=i&&"-reverse"||"",k&&d.html(k).attr("class","animate headingOutFade"+l),e.attr("class","animate headingInFade"+l),f=!0},this)})},on:{"click #backbutton":function(){return a.goBack()}}}});var hideAddressBar,ua,__bind=function(a,b){return function(){return a.apply(b,arguments)}};document.addEventListener("touchmove",function(a){return a.preventDefault()}),hideAddressBar=function(){var a,b;return a=0,setTimeout(b=__bind(function(){if(++a===1)return window.scrollTo(0,1)},this),500),$(window).bind("resize",function(){return a=0,b()})},$("body").attr("class",(ua=navigator.userAgent).match(/iPhone/i)||ua.match(/iPod/i)||ua.match(/iPad/i)?window.navigator.standalone?"IOSFullScreen":(hideAddressBar(),"IOS"):(hideAddressBar(),"ANDROID")),define("framework/App",["./Nav","./Model","./ContextModel","cell!./Context","cell!./ContextNavBar","cell!./TitleBar"],function(a,b,c,d,e,f){var g;return g={},{render:function(a,b){return[a(f),a("#content"),a(e)]},afterRender:function(){var b;return b=this.$("#content"),a.bindAndCall({"change:current":__bind(function(a){var c,e,f,h,i,j,k;e=a.cur,i=a.prev,f=a.data,h=f?f!=null?f.isContextSwitch:void 0:!0,h&&((c=g[e.context])||(c=g[e.context]=new d({contextid:e.context,initialHash:e}),b.append(c.$el)),c.$el.toggle(!0),(j=i!=null?i.context:void 0)&&(k=g[j])!=null&&k.$el.toggle(!1),c?(this.$("#content > .activeTab").removeClass("activeTab"),c.$el.toggle(!0).toggleClass("activeTab",!0)):typeof console!="undefined"&&console!==null&&typeof console.log=="function"&&console.log("Could not switch to context = '"+e.context+"'"))},this)})}}})